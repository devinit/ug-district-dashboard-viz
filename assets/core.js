(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(83)},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a,r=n(1),o=n(10),i=n(13),c=n.n(i),s=n(20),l=n(0),u=n.n(l),d=n(2),p=n.n(d),f=n(3),b=n(12),m=b.a.div(a||(a=Object(f.a)(["\n  color: red;\n  font-size: 11px;\n  position: relative;\n  padding: 5px 5px 5px 0px;\n  display: block;\n"]))),g=function(e){var t=Object(l.useState)(""),n=t[0],a=t[1],r=function(t){t?"maxSelectedOptions"===t.type&&a(e.selectErrorMessage):a("")};return u.a.createElement("div",null,u.a.Children.map(e.children,(function(e){return u.a.isValidElement(e)?u.a.cloneElement(e,{onError:r}):e})),n?u.a.createElement(m,{className:"data-selector--wrapper"},n):null)};g.propTypes={selectErrorMessage:p.a.string,children:p.a.node};var h=g,v=n(31),y=n(21),O=n(22),w=n.n(O),j=n(38),x={control:function(e){return Object.assign({},e,{borderColor:"#ddd",borderRadius:"none",boxShadow:"none",":hover":{borderColor:"#8f1b13"},":active":{borderColor:"#8f1b13"}})},menu:function(e){return Object.assign({},e,{color:"#443e42",backgroundColor:"#FFFFFF"})},option:function(e,t){return Object.assign({},e,{fontSize:"14px",":hover":{backgroundColor:"#f0826d"},backgroundColor:t.isSelected?"#8f1b13":"transparent"})},singleValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValueLabel:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{paddingRight:6})},multiValueRemove:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{display:"none"})},input:function(e){return Object.assign({},e,{fontSize:"14px"})},indicatorsContainer:function(e){return Object.assign({},e,{pointerEvents:"none"})}},C=function(e){var t=e.label,n=e.onError,a=e.maxSelectedOptions,o=e.defaultValue,i=e.singleSelectOptions,c=e.className,s=Object(y.a)(e,["label","onError","maxSelectedOptions","defaultValue","singleSelectOptions","className"]),u=Object(l.useState)(o),d=u[0],p=u[1];Object(l.useEffect)((function(){s.onChange&&s.onChange(d),n&&n()}),[d]);return Object(r.c)("div",{className:w()("labelled-data-selector--wrapper",c)},Object(r.c)("label",null,Object(r.c)("b",null,t)),Object(r.c)(j.a,Object(v.a)({},s,{value:d,onChange:function(e){if(s.isMulti)if(e.length){var t=e.findIndex((function(e){return i.find((function(t){return t.value===e.value}))}));s.isMulti&&e.length>1&&-1!==t?p(0===t?e.slice(1):[e[t]]):a&&e.length>a?n&&n({type:"maxSelectedOptions",message:"Only up to "+a+" selections allowed"}):p(e)}else p(o);else p(e)},css:{marginRight:"25px"},styles:x,isClearable:"undefined"!==s.isClearable?s.isClearable:d.length>1})))};C.propTypes={label:p.a.string,options:p.a.array,maxSelectedOptions:p.a.number,onChange:p.a.func,onError:p.a.func,defaultValue:p.a.array,singleSelectOptions:p.a.array,isMulti:p.a.bool,isClearable:p.a.bool,className:p.a.string},C.defaultProps={maxSelectedOptions:2,singleSelectOptions:[]};var E=C,S=n(32);function L(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var I=function(e,t){void 0===t&&(t="");var n=Number(e);return Number.isNaN(n)?t:new Intl.NumberFormat("en-GB",{maximumFractionDigits:2}).format(n)},k=function(e){for(var t,n=e[1]-e[0]+1,a=[],r=L(Array(n).keys());!(t=r()).done;){var o=t.value;a.push(o)}return a.map((function(t){return e[0]+t}))},T=function(e){return e.endsWith("csv")?function(e){return new Promise((function(t){Object(S.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,complete:function(e){var n=e.data;return t(n)}})}))}(e):window.fetch(e).then((function(e){return e.json()}))},D=function(e){var t=Object(l.useState)([]),n=t[0],a=t[1];Object(l.useEffect)((function(){e.configs&&Promise.all(e.configs.map(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n={label:t.label,defaultValue:t.defaultValue,stateProperty:t.stateProperty}).options=t.defaultValue?[t.defaultValue]:[],a=t.data||[],!t.url){e.next=7;break}return e.next=6,T(t.url);case 6:a=e.sent;case 7:return n.options=n.options.concat(a.reduce((function(e,n){return e.find((function(e){return e[t.valueProperty]===n[t.valueProperty]}))||e.push({value:n[t.valueProperty],label:n[t.labelProperty]}),e}),[])),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(a).catch((function(e){return window.console.log(e)}))}),[e.configs]);return Object(r.c)(h,{selectErrorMessage:""},n.map((function(e){var t=e.label,n=e.options,a=e.defaultValue,o=e.stateProperty;return Object(r.c)(E,{key:t,label:t,options:n,classNamePrefix:"subcounty-filter sticky-top",isClearable:!1,defaultValue:[Object.assign({},a,{isCloseable:!0})],onChange:function(e){var t;window.DIState.setState(((t={})[o]=e.value,t))},css:{minWidth:"200px"}})})))};D.propTypes={configs:p.a.arrayOf(p.a.shape({url:p.a.string,label:p.a.string.isRequired,defaultValue:p.a.shape({value:p.a.string,label:p.a.string}),stateProperty:p.a.string.isRequired,labelProperty:p.a.string.isRequired,valueProperty:p.a.string.isRequired}))};var P=D,A=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading(),e.closest(".section").classList.add("sticky");var n=function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,["spotlight-banner","data-selector--wrapper"]),e.parentElement.insertBefore(n,e),n}(e),a=Object(o.createRoot)(n);window.DIState?window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState.selectors;e?(Array.isArray(e)||window.console.log("Invalid value for selectors - an Array is expected. Please review the documentation!"),a.render(Object(r.c)(P,{configs:e}))):window.console.log("Waiting on state update ...")})):window.console.log("State is not defined"),t.hideLoading(),e.parentElement.classList.add("auto-height")}))}}})},z=n(33),F=n(14),_=function(){function e(){this.id=Math.random(),this.state={},this.listeners=[],Object(F.d)(this,{state:F.e,setState:F.a,getState:F.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(F.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(z.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new _;var R=n(18),q=n.n(R);var V,U,M={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0c457b","#0071b1","#0089cc","#5da3d9","#77adde","#88bae5","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"],orange:["#973915","#d85b31","#eb642b","#f18e5e","#f4a57c","#f6bb9d"]},Z={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{fontFamily:"Geomanist Regular,sans-serif"},axisPointer:{type:"none"}},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!0,title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){return"<div>"+e.title+"</div>"}}}},color:M.rainbow,xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},axisPointer:{type:"none"},grid:{top:10}},B=(n(7),function(){return u.a.createElement("div",{className:"no-data"},"No Data")}),W=function(e,t,n){var a=e.slice();return t.forEach((function(t,r){void 0===a[r]?a[r]=n.cloneUnlessOtherwiseSpecified(t,n):n.isMergeableObject(t)?a[r]=q()(e[r],t,n):-1===e.indexOf(t)&&a.push(t)})),a},G=function(e,t,n,a,r){var o=e.series,i=e.mapping,c=o.map((function(s,l){return{name:s,type:(u=e.type,u?"area"===u?"line":u:"bar"),stack:!e.type||["area","bar","column"].includes(e.type)?"School Type":void 0,areaStyle:"area"===e.type?{}:void 0,smooth:!0,emphasis:{focus:"series"},label:{show:l===o.length-1,position:"top",formatter:function(e){var t=0;return c.forEach((function(n){t+=n.data[e.dataIndex]})),I(t)}},data:a.map((function(a){var o=[];if(t.filter((function(e){return!n&&!r||"all"===n&&"all"===r||(!n||r&&"all"!==r?!r||n&&"all"!==n?e[i.subCounty].toLowerCase()===n.toLowerCase()&&e[i.level].toLowerCase()===r.toLowerCase():e[i.level].toLowerCase()===r.toLowerCase():e[i.subCounty].toLowerCase()===n.toLowerCase())})).forEach((function(e){e[i.year]===a&&e[i.series].toLowerCase()===s.toLowerCase()&&o.push(Number(e[i.value]))})),!e.aggregator||"sum"===e.aggregator)return o.reduce((function(e,t){return e+t}),0);if("avg"===e.aggregator){var c=o.reduce((function(e,t){return e+t}),0);return I(c/o.length)}throw new Error("Invalid aggregator: ",e.aggregator)}))};var u}));return c},J=function(e){(function(e){return e.className?e.series&&Array.isArray(e.series)?e.mapping?e.mapping.series?e.mapping.year?e.mapping.value?e.mapping.subCounty?!!e.mapping.level||(window.console.error("Invalid chart config: mapping[mapping.level] is required!"),!1):(window.console.error("Invalid chart config: mapping.subCounty is required!"),!1):(window.console.error("Invalid chart config: mapping.value is required!"),!1):(window.console.error("Invalid chart config: mapping.year is required!"),!1):(window.console.error("Invalid chart config: mapping.series is required!"),!1):(window.console.error("Invalid chart config: mapping is required!"),!1):(window.console.error(e.series?"Invalid chart config: Invalid series config - expected an array!":"Invalid chart config: Series is required!"),!1):(window.console.error("Invalid chart config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,echarts:{onAdd:function(t){Array.prototype.forEach.call(t,(function(t){t.classList.add("dicharts--dimensions","dicharts--padding-top");var n=new window.DICharts.Chart(t.parentElement),a=window.echarts.init(t);T(e.url).then((function(t){if(window.DIState){var r="all",o="all",i=e.filters&&e.filters.subCounties?t.filter((function(t){return e.filters.subCounties.includes(t[e.mapping.subCounty])})):t;window.DIState.addListener((function(){n.showLoading();var t=window.DIState.getState,c=t.subCounty,s=t.level;if(r!==c||o!==s){r=c||"all",o=s||"all";var l=function(e,t){return t?k(t).map((function(e){return""+e})):Array.from(new Set(e.map((function(e){return Number(e.year)})))).sort((function(e,t){return e-t})).map((function(e){return e.toString()}))}(i,e.yearRange),u=q()(Z,{responsive:!1,legend:{selectedMode:!1},grid:{top:60,bottom:20},xAxis:{data:l},yAxis:{type:"value",name:"Number of schools",nameLocation:"middle",nameGap:50},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1}}},series:G(e,i,r,l,o)});u.color=["#a21e25","#fbd7cb"].concat(M.default),a.setOption(q()(u,e.options||{},{arrayMerge:W})),n.hideLoading()}}))}else window.console.log("State is not defined")})),function(e,t){window.addEventListener("onresize",(function(){e.resize({width:t.clientWidth+"px",height:t.clientHeight+"px"})}),!0)}(a,t)}))}}})},H=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.charts;t&&e.length!==t.length&&(e=t.filter((function(e){return"education"===e.target}))).forEach(J)}))}else window.console.log("State is not defined")},X=n(11),K=n.n(X),Y=(n(74),function(e){var t=e.map,n=e.show,a=e.onAdd,r=Object(y.a)(e,["map","show","onAdd"]);return t&&(t.getLayer(r.id)&&t.removeLayer(r.id),n&&(t.addLayer(r),a&&a(t,r.id))),null});Y.defaultProps={show:!0},Y.propTypes={map:p.a.object,show:p.a.bool,onAdd:p.a.func};var $={width:"100%",position:"absolute",top:0,bottom:0,background:"#F3F3F3"},Q=function(e){K.a.accessToken=e.accessToken;var t=Object(l.useRef)(null),n=Object(l.useState)(void 0),a=n[0],o=n[1];Object(l.useEffect)((function(){if(t&&t.current){var n=new K.a.Map(Object.assign({container:t.current},e.options));e.showNavigationControls&&n.addControl(new K.a.NavigationControl),n.on("load",(function(t){o(n),e.onLoad&&e.onLoad(n,t)}))}}),[]);return Object(r.c)("div",{ref:t,style:Object.assign({},$,e.style),css:Object(r.b)(V||(V=Object(f.a)(["\n        background: ",";\n        font-family: geomanist, sans-serif;\n      "])),e.background)},l.Children.map(e.children,(function(e){return Object(l.isValidElement)(e)&&e.type===Y?Object(l.cloneElement)(e,{map:a}):null})),Object(r.c)(r.a,{styles:Object(r.b)(U||(U=Object(f.a)(["\n          div .mapboxgl-canary {\n            background: red;\n          }\n\n          div .mapboxgl-popup {\n            z-index: 400;\n            max-width: 100% !important;\n          }\n\n          div .mapboxgl-popup-content {\n            background-color: rgba(0, 0, 0, 0.9) !important;\n            box-shadow: none !important;\n            color: #ffffff !important;\n            font-family: geomanist, sans-serif;\n            -webkit-tap-highlight-color: black;\n            opacity: 0.8;\n            padding: 20px;\n          }\n\n          div .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n            border-top-color: rgba(0, 0, 0, 0.9);\n            opacity: 0.8;\n          }\n\n          div .mapboxgl-popup-content .mapBox-popup p {\n            margin-bottom: 0;\n          }\n\n          div .mapboxgl-popup-content .mapboxgl-popup-close-button {\n            color: #ffffff;\n            font-size: 1.8rem;\n          }\n        "])))}))};Q.defaultProps={style:$,options:{minZoom:6,zoom:6.1},showNavigationControls:!0,background:"inherit"},Q.propTypes={accessToken:p.a.string,style:p.a.object,background:p.a.string,showNavigationControls:p.a.bool,onLoad:p.a.func,options:p.a.object,children:p.a.node};var ee=n(23),te=n(4),ne=function(e,t){return t?t(e):e},ae=function(e,t,n,a){return e&&t&&n?e.map((function(e){var r=ne(e.name,a),o=t.find((function(t){return null!==e.value&&e.value<=parseFloat(t)}));return o?[r,n[t.indexOf(o)]]:e.value>parseFloat(t[t.length-1])?[r,n[n.length-1]]:[r,"#b3adad"]})):[]},re=function(e,t){return t&&"number"==typeof t.value?(e.dataPrefix||"")+'<span style="font-size: 1em; font-weight: 700; color:#EA7600">'+(n=t.value,void 0===a&&(a=1),(n>=1e12?(n/1e12).toFixed(a)+"tn":n>=1e9?(n/1e9).toFixed(a)+"bn":n>=1e6?(n/1e6).toFixed(a)+"m":n>=1e3?(n/1e3).toFixed(a)+"k":n>=0?""+n.toFixed(a):n<=-1e12?(n/1e12).toFixed(a)+"tn":n<=-1e9?(n/1e9).toFixed(a)+"bn":n<=-1e6?(n/1e6).toFixed(a)+"m":n<=1e3?(n/1e3).toFixed(a)+"k":""+n.toFixed(a))+"</span>")+(e.dataSuffix||""):"No Data";var n,a},oe=function(e){var t=e.geometry&&e.geometry.coordinates;return t?new X.LngLat(t[0],t[1]):null},ie=function(e,t,n){var a=e.querySourceFeatures("composite",{sourceLayer:n.sourceLayer,filter:["in",n.nameProperty,ne(t,n.formatter)]});return a&&a.length?function(e){if(Array.isArray(e)){var t=e.map((function(e){return Object(ee.a)(e.geometry).geometry.coordinates}));return t.push(t[0]),oe(Object(ee.a)(Object(te.f)([t])))}return oe(Object(ee.a)(e))}(a):null},ce=function(e,t,n,a,r){return t.setLngLat(n).setHTML('\n        <div style="white-space: nowrap;">\n          <div style="font-size:1.6rem;padding-bottom:5px;font-weight:700;text-align:center;text-transform:capitalize;">\n            '+a.toLowerCase()+"\n          </div>\n          "+(r?'<em style="font-size:1.4rem;">'+r+"</em>":"")+"\n        </div>\n      ").addTo(e)},se=function(e,t,n){return t.find((function(t){var a=n?n(t.name):t.name;return e.toLowerCase()===(""+a).toLowerCase()}))},le=Object(l.createContext)(),ue=Object(l.createContext)(),de=n(35),pe=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}Object(de.a)(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}};var n=t.prototype;return n.componentDidCatch=function(e,t){window.console.log("Error Boundary:",e,t)},n.render=function(){return this.state.hasError?u.a.createElement("div",null,"Something went wrong! Please contact your administrator"):this.props.children},t}(l.Component);pe.propTypes={children:p.a.any};var fe,be=pe,me=function(e,t){return e.find((function(e){return e.id===t}))},ge=function(e){return e.map((function(e){return{value:e.id,label:e.name}}))},he=function(e,t){var n=me(e,t);return n?n.indicators.map((function(e){return{value:e.id,label:e.name}})):[]},ve=function(e,t,n){if(t&&n){var a=me(e,t),r=a&&a.indicators&&a.indicators.length?a.indicators[0]:null;if(r&&r.yearRange)return k(r.yearRange).map((function(e){return{value:e,label:e}}))}return[]},ye=function(e){var t=Object(l.useContext)(ue),n=t.filterOptions,a=t.updateFilterOptions;return Object(l.useEffect)((function(){!n.topic&&e.length&&a({topic:e[0].id})}),[]),Object(l.useEffect)((function(){if(n.topic){var t=me(e,n.topic),r=t&&t.indicators&&t.indicators.length?t.indicators[0]:null;r&&a({indicator:r.id})}}),[n.topic]),{topicOptions:ge(e||[]),indicatorOptions:he(e,n.topic),yearOptions:ve(e,n.topic,n.indicator)}},Oe=function(){var e=Object(l.useContext)(ue),t=e.filters,n=e.topics,a=e.updateFilterOptions,o=ye(n),i=o.topicOptions,c=o.indicatorOptions,s=o.yearOptions;return Object(r.c)("form",{className:"form"},Object(r.c)("div",{className:w()("form-field","form-field--inline-block"),css:Object(r.b)(fe||(fe=Object(f.a)(["\n          z-index: auto;\n          margin-left: 5px;\n        "])))},Object(r.c)(E,{label:t.topicLabel,options:i,defaultValue:[i[0]],classNamePrefix:"topic-selector",isClearable:!1,css:{minWidth:"100%"},onChange:function(e){return a({topic:e&&e.value})}}),c&&c.length?Object(r.c)(E,{label:t.indicatorLabel,options:c,defaultValue:[c[0]],classNamePrefix:"indicator-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){return a({indicator:e&&e.value})}}):null,s&&s.length?Object(r.c)(E,{label:t.yearLabel,options:s,defaultValue:[s[0]],classNamePrefix:"year-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){Array.isArray(e)&&e.length?a({year:e[0].value}):e&&!Array.isArray(e)&&a({year:e.value})}}):null))},we=function(e){var t=e.children;return u.a.createElement("div",{className:"spotlight-legend","data-testid":"spotlight-legend"},l.Children.map(t,(function(e){return e})))};we.propTypes={children:p.a.any};var je=we,xe=function(e){var t=e.children,n=e.className,a=e.bgColor,r=e.textColor;return u.a.createElement("span",{className:n,"data-testid":"spotlight-legend-item"},t,u.a.createElement("style",null,"\n      span."+n+" {\n        background-color: "+(a||"#D1CBCF")+" !important;\n        color: "+(r||"inherit")+";\n      }\n    "))};xe.propTypes={children:p.a.any,className:p.a.string,bgColor:p.a.string,textColor:p.a.string};var Ce,Ee=xe,Se=function(){var e,t,n=Object(l.useContext)(ue).activeIndicator;return u.a.createElement("div",{className:"spotlight__content"},u.a.createElement(be,null,u.a.createElement(Oe,null)),n?u.a.createElement(je,null,(e=n.range,t=n.colours,e&&t?e.map((function(n,a){return u.a.createElement(Ee,{className:"item-"+n,bgColor:t[a],key:n},0===a?"< "+e[0]:e[a-1]+"-"+n)})).concat([u.a.createElement(Ee,{className:"item-last",bgColor:t[t.length-1],key:e.length},"> "+e[e.length-1])]):null),u.a.createElement(Ee,null,"no data / not applicable")):null)},Le=n(36),Ne={type:"shapefile",style:"mapbox://styles/edwinmp/ck42rrx240t8p1cqpkhgy2g0m/draft",sourceLayer:"Uganda_Sub-Counties_2019-8w0zb5",layerName:"uganda-Sub-counties-2019-8w0zb5",center:[32.655221,1.344666],zoom:8,minZoom:8,maxZoom:9,districtNameProperty:"District",nameProperty:"Subcounty",codeProperty:"scode2019",formatter:function(e,t){return void 0===t&&(t="map"),e.toUpperCase()}},Ie=function(e,t,n,a){n&&(e.setFilter(t,["==",a.nameProperty,ne(n.name,a.formatter)]),setTimeout((function(){if(n.coordinates)e.flyTo({center:n.coordinates,zoom:8.5});else{var t=a.formatter?a.formatter(n.name):n.name;!function e(t,n,a,r){return void 0===r&&(r=!0),new Promise((function(o,i){var c=ie(t,n,a);c?(t.flyTo({center:c,zoom:16}),o(c)):r?(t.flyTo({center:a.center,zoom:a.zoom||6.1}),setTimeout((function(){e(t,n,a,!1).then((function(e){return o(e)})).catch(i)}),500)):i(new Error("Location "+n+" not found!"))}))}(e,t,a)}}),500))},ke=function(e,t,n){if(!t)return[];if(!t.mapping)throw new Error("Mapping is required for indicator "+t.id);var a=t.mapping,r=a.location,o=a.value,i=a.year,c=n?e.filter((function(e){return e[i]===""+n})).map((function(e){return{name:e[r],value:Number(e[o])}})):e.map((function(e){return{name:e[r],value:Number(e[o])}}));return t.aggregator?function(e,t){var n=Object(Le.groupBy)(e,(function(e){return e.name}));return Object.keys(n).map((function(e){var a=n[e].reduce((function(e,t){return e+t.value}),0),r=a/n[e].length;return{name:e,value:"sum"===t?a:r}}))}(c,t.aggregator):c},Te=function(e,t,n,a){!function(e,t,n){var a=n.popup,r=n.nameProperty,o=n.formatter,i=n.data,c=function(e,t){if(e.features&&e.features[0].properties){var n=e.features[0].geometry;if("Polygon"===n.type||"MultiPolygon"===n.type)return e.features[0].properties[t]||null}return null}(t,r);if(c){var s=o?o(c,"tooltip"):c;if(i){var l=se(s,i);ce(e,a,t.lngLat,s,re(n,l))}else ce(e,a,t.lngLat,s,"")}}(t,n,Object.assign({},a,{popup:e}))},De=function(e,t,n){void 0===n&&(n={});var a=Object(l.useState)(),r=a[0],o=a[1],i=Object(l.useState)(n),u=i[0],d=i[1],p=Object(l.useState)([]),f=p[0],b=p[1];return Object(l.useEffect)((function(){if(r){r.getStyle().layers.forEach((function(e){["background","highlight"].includes(e.id)||r.setLayoutProperty(e.id,"visibility","none")})),function(e,t,n){t.clientWidth<700?e.setZoom(n.zoom?n.zoom-1:5):t.clientWidth<900?e.setZoom(n.minZoom?n.minZoom+.8:5.8):e.setZoom(n.zoom||6.1)}(r,r.getContainer(),t);var n=new X.Popup({offset:5}),a=r.getCanvas();r.on("mousemove","highlight",(function(e){a.style.cursor="pointer",Te(n,r,e,Object.assign({},t,{data:f},u))})),r.on("mouseleave","highlight",(function(){a.style.cursor="",e||n.remove()}))}}),[r,e,u,f]),Object(l.useEffect)((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,b(ke(n,u.indicator,u.year));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();u.indicator&&u.year&&e(u.indicator.url)}),[u.indicator,u.year]),{map:r,data:f,setData:b,setMap:o,setOptions:d}},Pe={topic:null,indicator:null,year:null},Ae=b.a.div(Ce||(Ce=Object(f.a)(["\n  position: absolute;\n  top: 1.75em;\n  z-index: 1;\n  left: 1.4em;\n"])));function ze(e,t){switch(t.type){case"UPDATE_FILTERS":return Object.assign({},e,{filterOptions:t.merge?Object.assign({},e.filterOptions,t.filterOptions):t.filterOptions,activeTopic:t.activeTopic,activeIndicator:t.activeIndicator});case"SET_DATA":return Object.assign({},e,{data:t.data});case"RESET_FILTERS":return Object.assign({},e,{filterOptions:Pe});default:throw new Error}}var Fe={filterOptions:Pe},_e=function(e){var t=Object(l.useState)(!0),n=t[0],a=t[1],o=Object(l.useReducer)(ze,Fe),i=o[0],c=o[1],s=i.filterOptions,u=i.activeIndicator,d=i.activeTopic,p=De(e.location,Ne),f=p.data,b=p.setMap,m=p.setOptions;Object(l.useEffect)((function(){if(u){var e=s.year;m({dataPrefix:u.name+": ",dataSuffix:e&&" in "+e,indicator:u,year:e})}}),[u,s.year]);var g,h,v=function(t,n){void 0===n&&(n=!0);var a=function(e,t){var n=t.topic,a=t.indicator,r=t.year;if(n){var o=e.find((function(e){return e.id===n}));if(o&&a){var i=o.indicators.find((function(e){return e.id===a}));if(i)return{topic:o,indicator:i,year:r}}return{topic:o}}return{}}(e.configs.data,Object.assign({},s,t)),r=a.topic,o=a.indicator;c({type:"UPDATE_FILTERS",merge:n,filterOptions:t,activeTopic:r,activeIndicator:o})},y=(g=e.configs.data,h=s.topic,g.find((function(e){return e.id===h}))),O=Object(l.useMemo)((function(){return{filters:e.filters,topics:e.configs.data,filterOptions:s,updateFilterOptions:v,activeTopic:d,activeIndicator:u}}));return Object(r.c)(ue.Provider,{value:O},Object(r.c)("div",{className:"spotlight"},Object(r.c)("div",{className:"spotlight__aside spotlight__aside--no-margin",css:{minHeight:"600px"}},Object(r.c)(Se,null)),Object(r.c)("div",{className:"spotlight__main spotlight__main--map"},n?Object(r.c)("div",null,"Loading ..."):null,y&&y.dashboardUrl?Object(r.c)(Ae,null,Object(r.c)("a",{href:y.dashboardUrl,className:"button button--secondary--fill"},y.dashboardButtonCaption)):null,Object(r.c)(Q,{accessToken:"pk.eyJ1IjoiZWR3aW5tcCIsImEiOiJjazFsdHVtcG0wOG9mM2RueWJscHhmcXZqIn0.cDR43UvfMaOY9cNJsEKsvg",options:{style:Ne.style,center:Ne.center,minZoom:Ne.minZoom||6,zoom:Ne.zoom||6.1,maxZoom:Ne.maxZoom||7,scrollZoom:!1},style:{width:"100%",background:"#ffffff"},onLoad:function(e){a(!1),b(e)}},function(e,t,n,a,o){var i=[a].map((function(e){return Object(r.c)(Y,{key:"highlight-hidden",id:e.layerName,source:"composite","source-layer":e.sourceLayer,show:!1})}));function c(e,t){Ie(e,t,n,Object.assign({},a,{nameProperty:a.districtNameProperty}))}return!e&&t.length?i.concat(Object(r.c)(Y,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+1,type:"fill",paint:{"fill-color":{property:a.nameProperty,type:"categorical",default:"#D1CBCF",stops:ae(t,o.range,o.colours,a.formatter)},"fill-opacity":.75,"fill-outline-color":"#ffffff"},onAdd:c})):i.concat(Object(r.c)(Y,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+1,type:"fill",paint:{"fill-color":"#D1CBCF","fill-opacity":.75,"fill-outline-color":"#ffffff"},onAdd:c}))}(n,f,e.location,Ne,u?{range:u.range,colours:u.colours}:{})))))};_e.defaultProps={data:[]},_e.propTypes={configs:p.a.object,filters:p.a.object,data:p.a.array,location:p.a.shape({name:p.a.string,fullName:p.a.string,coordinates:p.a.array})};var Re,qe,Ve,Ue,Me,Ze,Be,We=_e,Ge=b.a.div(Re||(Re=Object(f.a)(["\n  background: #ffffff;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n"]))),Je=function(){return u.a.createElement(Ge,null,u.a.createElement(B,null))},He=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.map,r=e.location;a?n.render(u.a.createElement(We,{configs:a,location:r,filters:a.filters})):n.render(u.a.createElement(Je,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},Xe=n(37),Ke=function(e){var t=e.close,n=e.description,a=e.source;return Object(r.c)("div",{className:"spotlight-modal",css:Object(r.b)(Ve||(Ve=Object(f.a)(["\n        font-size: 12px;\n      "])))},Object(r.c)("a",{className:"close",onClick:t,css:Object(r.b)(Ue||(Ue=Object(f.a)(["\n          cursor: pointer;\n          position: absolute;\n          display: block;\n          padding: 5px 10px;\n          line-height: 20px;\n          right: 0px;\n          top: 0px;\n          font-size: 20px;\n          background: transparent;\n          color: #333131;\n          font-weight: 900;\n        "])))},"×"),Object(r.c)("div",{className:"content",css:Object(r.b)(Me||(Me=Object(f.a)(["\n          width: 100%;\n          padding: 10px 5px 10px 5px;\n        "])))},Object(r.c)("p",{className:"description",css:Object(r.b)(Ze||(Ze=Object(f.a)(["\n            font-size: 14px;\n          "])))},n),a?Object(r.c)(u.a.Fragment,null,Object(r.c)("br",null),Object(r.c)("p",{className:"source",css:Object(r.b)(Be||(Be=Object(f.a)(["\n                text-align: left;\n              "])))},a?Object(r.c)(u.a.Fragment,null,Object(r.c)("b",{css:Object(r.b)(qe||(qe=Object(f.a)(["\n              font-family: Geomanist Bold, sans-serif;\n            "])))},"Source:"," "),a):null)," "):null))};Ke.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string,close:p.a.func.isRequired};var Ye,$e,Qe=Ke,et=function(e){return Object(r.c)(Xe.a,{trigger:Object(r.c)("span",{className:"spotlight__stat-icon",css:Object(r.b)(Ye||(Ye=Object(f.a)(["\n            display: inline-flex;\n            margin-left: 2px;\n            cursor: pointer;\n            padding: 8px;\n          "])))},Object(r.c)("i",{onClick:function(){document.querySelectorAll(".popup-content ").forEach((function(e){e.setAttribute("style","display:none;")}))},role:"presentation","aria-hidden":"true",className:"ico ico--12 ico-info-slate",css:Object(r.b)($e||($e=Object(f.a)(["\n              top: -1px;\n            "])))})),offsetX:20,arrowStyle:{height:"10px",width:"10px",position:"absolute",background:"rgb(255, 255, 255)",transform:"rotate(225deg)",margin:"-5px",zIndex:-1,boxShadow:"rgb(0 0 0 / 20%) 1px 1px 1px",bottom:"0%",left:"82px"},position:"bottom center",closeOnDocumentClick:!0,contentStyle:{zIndex:200,width:"350px",background:"#fff",fontWeight:400,fontStyle:"normal",fontSize:"12px",color:"#60575d",border:0,borderRadius:"0.28571429rem",boxShadow:"0 2px 4px 0 rgba(34, 36, 38, 0.12), 0 2px 10px 0 rgba(34, 36, 38, 0.15)",padding:"5px"}},(function(t){return Object(r.c)(Qe,{close:t,description:e.description,source:e.source})}))};et.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string};var tt=et,nt=function(e){var t=e.meta,n=void 0===t?{}:t,a=e.heading,r=e.children;return u.a.createElement("div",{className:"spotlight__stat"},u.a.createElement("h3",{className:"spotlight__stat-heading"},a,n.description||n.source?u.a.createElement(tt,{description:n.description,source:n.source}):null),r)};nt.defaultProps={meta:{}},nt.propTypes={heading:p.a.string,meta:p.a.shape({description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string}),children:p.a.any};var at,rt=nt,ot=function(e){var t=e.value,n=e.note;return Object(r.c)("p",{className:"spotlight__stat-data"},t,n&&n.content?Object(r.c)("span",{className:"spotlight__stat-data__note",css:Object(r.b)(at||(at=Object(f.a)(["\n          transform: none;\n          position: relative;\n          top: -10px;\n        "])))},n.content," ",n.meta?Object(r.c)(tt,{description:n.meta.description,source:n.meta.source}):null):null)};ot.propTypes={note:p.a.object,value:p.a.string};var it,ct=ot,st=function(e){var t=e.children;return Object(r.c)("article",{className:"tabs__content",css:Object(r.b)(it||(it=Object(f.a)(["\n      z-index: 200;\n    "])))},t)};st.propTypes={children:p.a.any};var lt=st,ut=function(e){var t=e.id,n=e.active,a=e.label,r=e.children,o=e.onActivate;return u.a.createElement("section",{className:"tabs__container",id:t},u.a.createElement("input",{className:"tabs__input",type:"radio",name:"sections",id:t+"-option",defaultChecked:n}),u.a.createElement("label",{className:"tabs__label",htmlFor:t+"-option",onClick:o},a),l.Children.map(r,(function(e){return Object(l.isValidElement)(e)&&e.type===lt?e:null})))};ut.propTypes={id:p.a.string.isRequired,label:p.a.string.isRequired,active:p.a.bool,onActivate:p.a.func,children:p.a.any};var dt=ut,pt=function(e){var t=e.children,n=e.onClick;return u.a.createElement("div",{className:"tabs__content__header",onClick:n},t)};pt.propTypes={children:p.a.any,onClick:p.a.func};var ft,bt,mt,gt,ht,vt=pt,yt=function(e,t){return t&&e?e.find((function(e){return e.id===t})):null},Ot=function(e){var t=Object(l.useContext)(le),n=t.data,a=t.location,o=t.options,i="education",c=yt(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.education?n.education.find((function(e){return"Number of Schools"===e.caption})):null;return Object(r.c)(dt,{id:i,label:c.label||"Education",active:!!e.active||c.active},Object(r.c)(lt,null,Object(r.c)(vt,null,s?Object(r.c)("div",{css:Object(r.b)(ft||(ft=Object(f.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(bt||(bt=Object(f.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(mt||(mt=Object(f.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(gt||(gt=Object(f.a)(["\n                    font-size: 3rem;\n                  "])))},I(s.value)),Object(r.c)(tt,{description:"Last updated: "+s.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.education?n.education.filter((function(e){return"Number of Schools"!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(rt,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(ht||(ht=Object(f.a)(["\n                              display: flex;\n                              justify-content: center;\n                            "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(ct,{value:e.value})))})):null)))};Ot.propTypes={active:p.a.bool};var wt,jt,xt,Ct,Et,St=Ot,Lt=function(e){var t=Object(l.useContext)(le),n=t.data,a=t.location,o=t.options,i="overview",c=yt(o.tabs,i);return void 0===c.show||c.show?Object(r.c)(dt,{id:i,label:c.label||"Overview",active:!!e.active||c.active},Object(r.c)(lt,null,Object(r.c)(vt,null,n&&n.population?Object(r.c)("div",{css:Object(r.b)(wt||(wt=Object(f.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(jt||(jt=Object(f.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(xt||(xt=Object(f.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Total Population in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Ct||(Ct=Object(f.a)(["\n                    font-size: 3rem;\n                  "])))},I(n.population.value)),Object(r.c)(tt,{description:"Last updated: "+n.population.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.administration?n.administration.map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(rt,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Et||(Et=Object(f.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(ct,{value:e.value})))})):null))):null};Lt.propTypes={active:p.a.bool};var Nt,It,kt,Tt,Dt,Pt,At=Lt,zt=function(e){var t=Object(l.useContext)(le),n=t.data,a=t.location,o=t.options,i="production",c=yt(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.production?n.production.find((function(e){return""===e.caption})):null,u=function(){return c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null};return Object(r.c)(dt,{id:i,label:c.label||"Production",active:!!e.active||c.active},Object(r.c)(lt,null,s?Object(r.c)(vt,null,Object(r.c)("div",{css:Object(r.b)(Nt||(Nt=Object(f.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(It||(It=Object(f.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(kt||(kt=Object(f.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Tt||(Tt=Object(f.a)(["\n                    font-size: 3rem;\n                  "])))},I(s.value)),Object(r.c)(tt,{description:"Last updated: "+s.lastUpdated})),u())):u(),n&&n.production&&n.production.length?Object(r.c)("div",{className:"l-2up"},n.production.filter((function(e){return""!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(rt,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Dt||(Dt=Object(f.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(ct,{value:e.value})))}))):Object(r.c)("div",{css:Object(r.b)(Pt||(Pt=Object(f.a)(["\n              font-size: 16px;\n              display: flex;\n              justify-content: center;\n              width: 100%;\n            "])))},"No Production Data")))};zt.propTypes={active:p.a.bool};var Ft,_t=zt,Rt=function(e){var t=e.children;return Object(r.c)("div",{className:"tabs",css:Object(r.b)(Ft||(Ft=Object(f.a)(["\n      z-index: 0;\n    "])))},t)};Rt.propTypes={children:p.a.any};var qt=Rt,Vt=function(e){var t=Object(l.useState)({}),n=t[0],a=t[1];return Object(l.useEffect)((function(){e.data&&a(function(e){var t={},n=function(e){return{caption:e.Item,value:e.Value,lastUpdated:e["Last Updated"]}},a=e.find((function(e){return"Total Population"===e.Item}));return a&&(t.population=n(a)),t.administration=e.filter((function(e){return"Total Population"!==e.Item&&"Administration"===e.Department})).map(n),t.education=e.filter((function(e){return"Total Population"!==e.Item&&"Education"===e.Department})).map(n),t.production=e.filter((function(e){return"Total Population"!==e.Item&&"Production"===e.Department})).map(n),t}(e.data))}),[e.data]),Object(r.c)(le.Provider,{value:Object.assign({},e,{data:n})},Object(r.c)(qt,null,Object(r.c)(At,{active:!0}),Object(r.c)(St,null),Object(r.c)(_t,null)))};Vt.propTypes={data:p.a.array.isRequired,location:p.a.object.isRequired,options:p.a.object.isRequired};var Ut=Vt,Mt=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.keyFacts,r=e.location;a&&a.url?T(a.url).then((function(e){Array.isArray(e)?n.render(u.a.createElement(Ut,{data:e,options:a,location:r})):e.results?n.render(u.a.createElement(Ut,{data:e.results,options:a,location:r})):(window.console.error("Invalid data shape. Expected an array or an object with a results property.",e),n.render(u.a.createElement(Je,null)))})).catch((function(e){window.console.log(e),n.render(u.a.createElement(Je,null))})):a&&a.data?n.render(u.a.createElement(Ut,{data:a.data,options:a,location:r})):n.render(u.a.createElement(Je,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},Zt=function(e){return u.a.createElement("div",{className:"table-styled"},u.a.createElement("table",null,e.children))};Zt.propTypes={children:p.a.any};var Bt=Zt,Wt=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return u.a.createElement("tr",{key:n},e.map((function(e,n){return t?u.a.createElement("th",{key:n},e):u.a.createElement("td",{key:n},e)})))}))};return u.a.createElement(Bt,null,u.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),u.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))};Wt.propTypes={rows:p.a.arrayOf(p.a.array)};var Gt=Wt,Jt=function(e){(function(e){return e.className?e.mapping?e.mapping.rows?e.mapping.year?e.mapping.value?e.mapping.subCounty?!!e.mapping.level||(window.console.error("Invalid table config: mapping[mapping.level] is required!"),!1):(window.console.error("Invalid table config: mapping.subCounty is required!"),!1):(window.console.error("Invalid table config: mapping.value is required!"),!1):(window.console.error("Invalid table config: mapping.year is required!"),!1):(window.console.error("Invalid table config: mapping.series is required!"),!1):(window.console.error("Invalid table config: mapping is required!"),!1):(window.console.error("Invalid table config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,d3:{onAdd:function(t){T(e.url).then((function(n){Array.prototype.forEach.call(t,(function(t){var a=new window.DICharts.Chart(t.parentElement);a.showLoading();var r=Object(o.createRoot)(t),i="all",c="all";window.DIState.addListener((function(){a.showLoading();var o=window.DIState.getState,s=o.subCounty,u=o.level;if(s!==c||u!==i){c=s||"all",i=u||"all";var d=e.filters&&e.filters.subCounties?n.filter((function(t){return e.filters.subCounties.includes(t[e.mapping.subCounty])})):n,p=function(e,t,n,a){var r=e.rows,o=e.mapping,i=k(e.yearRange),c=["School Type"].concat(i),s=r.map((function(r){var c={};t.filter((function(e){return i.includes(Number(e[o.year]))&&e[o.rows]===r})).filter((function(e){return"all"===n||e[o.subCounty].toLowerCase()===n.toLowerCase()})).filter((function(e){return"all"===a||e[o.level].toLowerCase()===a.toLowerCase()})).forEach((function(e){var t=c[e[o.year]]||[];c[e[o.year]]=[].concat(t,[Number(e[o.value])])}));var s={};Object.keys(c).forEach((function(t){if(e.aggregator&&"sum"!==e.aggregator){if(e.aggregator&&"avg"===e.aggregator){var n=c[t].reduce((function(e,t){return e+t}),0);s[t]=n/c[t].length}}else s[t]=c[t].reduce((function(e,t){return e+t}),0)}));var l=i.map((function(e){return s[e]?s[e]:0}));return[r].concat(l)})),l=c.map((function(e,t){return 0===t?"Total":I(s.reduce((function(e,n){return"number"==typeof n[t]?e+n[t]:e}),0))})),u=s.map((function(e){return e.map((function(e){return"number"==typeof e?I(e):e}))}));return[c].concat(u,[l])}(e,d,c,i);r.render(Object(l.createElement)(Gt,{rows:p})),a.hideLoading(),t.parentElement.classList.add("auto-height")}}))}))}))}}})},Ht=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.tables;t&&e.length!==t.length&&(e=t.filter((function(e){return"education"===e.target}))).forEach(Jt)}))}else window.console.log("State is not defined")};n(82);window.addEventListener("load",(function(){A("district-selectors"),He("dicharts--district-map"),Ht(),Mt("dicharts--keyfacts"),H()}))}},[[39,1,2]]]);