(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,n){e.exports=n(94)},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a,r=n(1),o=n(8),i=n(95),c=n(12),s=n.n(c),l=n(14),u=n(0),d=n.n(u),f=n(2),p=n.n(f),b=n(3),m=n(15),g=n(7),h=n.n(g),v=m.a.div(a||(a=Object(b.a)(["\n  color: red;\n  font-size: 11px;\n  position: relative;\n  padding: 5px 5px 5px 0px;\n  display: block;\n"]))),y=function(e){var t=Object(u.useState)(""),n=t[0],a=t[1],r=function(t){t?"maxSelectedOptions"===t.type&&a(e.selectErrorMessage):a("")};return d.a.createElement("div",{className:h()(e.className)},d.a.Children.map(e.children,(function(e){return d.a.isValidElement(e)?d.a.cloneElement(e,{onError:r}):e})),n?d.a.createElement(v,{className:"data-selector--wrapper"},n):null)};y.propTypes={selectErrorMessage:p.a.string,children:p.a.node,className:p.a.string};var O=y,j=n(22),w=n(23),x=n(42),C={control:function(e){return Object.assign({},e,{borderColor:"#ddd",borderRadius:"none",boxShadow:"none",":hover":{borderColor:"#357ba5"},":active":{borderColor:"#357ba5"}})},menu:function(e){return Object.assign({},e,{color:"#443e42",backgroundColor:"#FFFFFF"})},option:function(e,t){return Object.assign({},e,{fontSize:"14px",":hover":{backgroundColor:"#4e9ac6",color:"#ffffff"},backgroundColor:t.isSelected?"#357ba5":"transparent"})},singleValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValueLabel:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{paddingRight:6})},multiValueRemove:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{display:"none"})},input:function(e){return Object.assign({},e,{fontSize:"14px"})},indicatorsContainer:function(e){return Object.assign({},e,{pointerEvents:"none"})}},S=function(e){var t=e.label,n=e.onError,a=e.maxSelectedOptions,o=e.defaultValue,i=e.singleSelectOptions,c=e.className,s=Object(w.a)(e,["label","onError","maxSelectedOptions","defaultValue","singleSelectOptions","className"]),l=Object(u.useState)(o),d=l[0],f=l[1];Object(u.useEffect)((function(){s.onChange&&s.onChange(d),n&&n()}),[d]),Object(u.useEffect)((function(){s.value&&f(s.value)}),[s.value]);return Object(r.c)("div",{className:h()("labelled-data-selector--wrapper",c)},Object(r.c)("label",null,Object(r.c)("b",null,t)),Object(r.c)(x.a,Object(j.a)({},s,{value:d,onChange:function(e){if(s.isMulti)if(e.length){var t=e.findIndex((function(e){return i.find((function(t){return t.value===e.value}))}));s.isMulti&&e.length>1&&-1!==t?f(0===t?e.slice(1):[e[t]]):a&&e.length>a?n&&n({type:"maxSelectedOptions",message:"Only up to "+a+" selections allowed"}):f(e)}else f(o);else f(e)},css:{marginRight:"25px"},styles:C,isClearable:"undefined"!==s.isClearable?s.isClearable:d.length>1})))};S.propTypes={label:p.a.string,options:p.a.array,maxSelectedOptions:p.a.number,onChange:p.a.func,onError:p.a.func,defaultValue:p.a.array,singleSelectOptions:p.a.array,isMulti:p.a.bool,isClearable:p.a.bool,className:p.a.string,value:p.a.array},S.defaultProps={maxSelectedOptions:2,singleSelectOptions:[]};var E=S,L=n(34);function N(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var P=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n={});var a=Number(e);return Number.isNaN(a)?t:new Intl.NumberFormat("en-GB",Object.assign({maximumFractionDigits:2},n)).format(a)},I=function(e){for(var t,n=e[1]-e[0]+1,a=[],r=N(Array(n).keys());!(t=r()).done;){var o=t.value;a.push(o)}return a.map((function(t){return e[0]+t}))},T=function(e){return e.endsWith("csv")?function(e){return new Promise((function(t){Object(L.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,complete:function(e){var n=e.data;return t(n)}})}))}(e):window.fetch(e).then((function(e){return e.json()}))},F=function(e){var t=Object(u.useState)([]),n=t[0],a=t[1];Object(u.useEffect)((function(){e.configs&&Promise.all(e.configs.map(function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n={label:t.label,defaultValue:t.defaultValue,config:t,dataProperty:t.dataProperty}).options=t.defaultValue?[t.defaultValue]:[],a=t.data||[],!t.url){e.next=7;break}return e.next=6,T(t.url);case 6:a=e.sent;case 7:return n.options=n.options.concat(a.reduce((function(e,n){return e.find((function(e){return e[t.valueProperty]===n[t.valueProperty]}))||e.push({value:n[t.valueProperty],label:n[t.labelProperty]}),e}),[])),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(a).catch((function(e){return window.console.log(e)}))}),[e.configs]);return Object(r.c)(O,{selectErrorMessage:"",className:e.className},n.map((function(t){var n=t.label,a=t.options,o=t.defaultValue;return Object(r.c)(E,{key:n,label:n,options:a,classNamePrefix:"subcounty-filter sticky-top",isClearable:!1,defaultValue:[Object.assign({},o,{isCloseable:!0})],onChange:function(n){return e.onChange(t,n)},css:{minWidth:"200px"}})})),e.children)};F.propTypes={configs:p.a.arrayOf(p.a.shape({url:p.a.string,label:p.a.string.isRequired,defaultValue:p.a.shape({value:p.a.string,label:p.a.string}),labelProperty:p.a.string.isRequired,valueProperty:p.a.string.isRequired})),onChange:p.a.func,className:p.a.string,children:p.a.node};var A=F,D=function(e,t){void 0===t&&(t={makeSticky:!1});var n=[],a=function(e,t){var n;window.DIState.setState(((n={})[e.config.stateProperty]=t.value,n))};return t.nodes&&t.nodes.length?(t.nodes.forEach((function(e){n.push(new Promise((function(n){e.render(Object(r.c)(A,{key:Object(i.a)(),configs:t.selectors,onChange:t.onChange||a})),n(e)})))})),Promise.all(n)):(Array.prototype.forEach.call(document.querySelectorAll("."+e),(function(e){n.push(new Promise((function(n){var i=new window.DICharts.Chart(e.parentElement);i.showLoading();var c=e.closest(".section");t.makeSticky&&c.classList.add("sticky");var s,l,u=((l=(s=e).classList).add.apply(l,["spotlight-banner","data-selector--wrapper"]),s),d=Object(o.createRoot)(u);window.DIState?window.DIState.addListener((function(){i.showLoading();var e=(t.selectors?t:window.DIState.getState).selectors;e?(Array.isArray(e)||window.console.log("Invalid value for selectors - an Array is expected. Please review the documentation!"),d.render(Object(r.c)(A,{configs:e,onChange:t.onChange||a}))):window.console.log("Waiting on state update ...")})):window.console.log("State is not defined"),i.hideLoading(),e.parentElement.classList.add("auto-height"),n(d)})))})),Promise.all(n))},_=n(35),z=n(17),R=function(){function e(){this.id=Object(i.a)(),this.state={},this.listeners=[],Object(z.d)(this,{state:z.e,setState:z.a,getState:z.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(z.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(_.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new R;var q=function(e,t){return t&&e?e.find((function(e){return e.id===t})):null},V=function(e,t,n){return t&&n?e.filter((function(e){return e[t].toLowerCase()===n.toLowerCase()})):e},M=function(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach((function(e){n=n.filter((function(n){return t[e].includes(n[e])}))})),n},U=function(e,t,n){var a=e.rows,r=e.mapping,o=I(e.yearRange).filter((function(t){return!e.excludeYears||!e.excludeYears.includes(t)})),i=["School Type"].concat(o),c=a.map((function(a){var i={};t.filter((function(e){return o.includes(Number(e[r.year]))&&e[r.rows].toLowerCase()===a.toLowerCase()})).filter((function(e){return"all"===n||e[r.subCounty].toLowerCase()===n.toLowerCase()})).forEach((function(e){var t=i[e[r.year]]||[];i[e[r.year]]=[].concat(t,[Number(e[r.value])])}));var c={};Object.keys(i).forEach((function(t){if(e.aggregator&&"sum"!==e.aggregator){if(e.aggregator&&"avg"===e.aggregator){var n=i[t].reduce((function(e,t){return e+t}),0);c[t]=n/i[t].length}}else c[t]=i[t].reduce((function(e,t){return e+t}),0)}));var s=o.map((function(e){return c[e]?c[e]:0}));return[a].concat(s)})),s=i.map((function(e,t){return 0===t?"Total":P(c.reduce((function(e,n){return"number"==typeof n[t]?e+n[t]:e}),0))})),l=c.map((function(e){return e.map((function(e){return"number"==typeof e?P(e):e}))}));return[i].concat(l,[s])},G=function(e){return Object(r.c)(E,{options:e.options,isClearable:!1,defaultValue:[e.options[0]],onChange:function(t){return e.onChange(t.value)},css:{minWidth:"200px",marginLeft:"2em"}})};G.propTypes={options:p.a.array,onChange:p.a.func};var Z=G;var B={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0c457b","#0071b1","#0089cc","#5da3d9","#77adde","#88bae5","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"],orange:["#973915","#d85b31","#eb642b","#f18e5e","#f4a57c","#f6bb9d"],cerulean:["#1a3e53","#2b6587","#357ba5","#78b1d4","#ecf4f9","#0c457b","#0071b1"]},Y={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{color:"#32313f",fontFamily:"Geomanist Regular,sans-serif"},axisPointer:{type:"line",axis:"x"}},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!0,title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",color:"#32313f",formatter:function(e){return"<div>"+e.title+"</div>"}}}},color:B.rainbow,xAxis:{axisLine:{show:!0,lineStyle:{color:"#ddd"}},axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,color:"#32313f"},splitLine:{show:!1},nameTextStyle:{color:"#32313f",fontFamily:"Geomanist Regular,sans-serif"}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13,color:"#32313f"},axisLine:{show:!1,lineStyle:{color:"#ddd"}},axisTick:{show:!1},splitLine:{show:!1},nameTextStyle:{color:"#32313f",fontFamily:"Geomanist Regular,sans-serif"}},axisPointer:{type:"none"},grid:{top:10},textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},W=n(20),H=n.n(W),J=(n(9),function(){return d.a.createElement("div",{className:"no-data"},"No Data")}),X=function(e,t,n){var a=e.slice();return t.forEach((function(t,r){void 0===a[r]?a[r]=n.cloneUnlessOtherwiseSpecified(t,n):n.isMergeableObject(t)?a[r]=H()(e[r],t,n):-1===e.indexOf(t)&&a.push(t)})),a},K=function(e,t){if(void 0===t&&(t={}),Array.isArray(t.yearRange)&&t.yearRange.length){var n=I(t.yearRange);return t.excludeYears?n.filter((function(e){return!t.excludeYears.includes(e)})).map((function(e){return""+e})):n.map((function(e){return""+e}))}var a=t.mapping&&t.mapping.year;if(!a)return[];var r=Array.from(new Set(e.map((function(e){return Number(e[a])})))).sort((function(e,t){return e-t}));return t.excludeYears?r.filter((function(e){return!t.excludeYears.includes(e)})).map((function(e){return""+e})):r.map((function(e){return e.toString()}))},$=function(e,t,n){var a=e.reduce((function(e,a){return a[n.mapping.series]===t?e+Number(a[n.mapping.value]):e}),0);return n.aggregator&&"sum"!==n.aggregator&&"avg"===n.aggregator?a/e.filter((function(e){return e[n.mapping.series]===t})):a},Q=function(e,t,n){var a,r=e.series,o=e.mapping,i=!(a=e.type)||["bar-stacked","column-stacked"].includes(a)?"bar":"area"===a?"line":a;if("pie"!==i){var c=!e.type||["area","bar-stacked","column-stacked"].includes(e.type)?"district-stack":void 0,s=r.map((function(a,l){return{name:a,type:i,stack:c,areaStyle:"area"===e.type?{}:void 0,smooth:!0,emphasis:{focus:"series",label:{show:!0,formatter:function(e){return P(e.value)}}},symbol:"circle",label:{show:c&&l===r.length-1,fontFamily:"Geomanist Regular,sans-serif",position:"top",formatter:function(e){for(var t=0,n=0;n<s.length;n+=1)t+=parseInt(s[n].data[e.dataIndex],10);return P(t,"",{notation:"compact"})}},data:n.map((function(n){var r=[];if(t.forEach((function(e){""+(e[o.year]||"")==""+n&&e[o.series].toLowerCase()===a.toLowerCase()&&r.push(Number(e[o.value]))})),!e.aggregator||"sum"===e.aggregator)return r.reduce((function(e,t){return e+t}),0);if("avg"===e.aggregator){var i=r.reduce((function(e,t){return e+t}),0);return P(i/r.length)}throw new Error("Invalid aggregator: ",e.aggregator)}))}}));return s}return[{type:"pie",radius:"50%",data:r.map((function(n){return{name:n,value:$(t,n,e)}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontFamily:"Geomanist Regular,sans-serif"}}]},ee=function(e){var t=Object(u.useRef)(null),n=Object(u.useState)(),a=n[0],r=n[1];return Object(u.useEffect)((function(){if(t.current){var e=window.echarts.init(t.current);r(e),function(e,t){window.addEventListener("resize",(function(){e.resize({width:t.clientWidth+"px",height:t.clientHeight+"px"})}),!0)}(e,t.current)}}),[]),Object(u.useEffect)((function(){if(a&&e.data){var t=e.config;!function(e){var t=e.data,n=e.years,a=e.config,r=e.chart,o=H()(Y,{responsive:!1,legend:{selectedMode:!0},grid:{top:60,bottom:60},xAxis:{data:n,nameTextStyle:{verticalAlign:"top"},name:"Years",boundaryGap:"area"!==a.type},yAxis:{type:"value",nameLocation:"middle",nameGap:50,axisLabel:{formatter:function(e){return P(e,"",{notation:"compact"})}}},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1}}},series:Q(a,t,n)});o.color=B.cerulean,r.setOption(H()(o,a.options||{},{arrayMerge:X}))}({data:e.data,years:e.years,chart:a,config:Object.assign({},t,{type:e.type||t.type})})}}),[a,e.data,e.type]),d.a.createElement("div",{ref:t,style:{height:e.height||"450px"}})};ee.propTypes={config:p.a.object,subCounty:p.a.string,data:p.a.array,years:p.a.array,height:p.a.string,type:p.a.string},ee.defaultProps={subCounty:"all"};var te=ee,ne=function(e){return d.a.createElement("div",{className:"table-styled"},d.a.createElement("table",null,e.children))};ne.propTypes={children:p.a.any};var ae=ne,re=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return d.a.createElement("tr",{key:n},e.map((function(e,n){return t?d.a.createElement("th",{key:n},e):d.a.createElement("td",{key:n},e)})))}))};return d.a.createElement(ae,null,d.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),d.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))};re.propTypes={rows:p.a.arrayOf(p.a.array)};var oe=re,ie=n(43),ce=function(e,t){void 0===t&&(t=[]);var n=e.url,a=e.yearRange,r=Object(ie.a)(n||e.className,(function(){return e.data&&Array.isArray(e.data)?e.data:n?T(n).then((function(t){return e.filters?M(t,e.filters):t})):[]})),o=r.data,i=r.error,c=Object(u.useState)(t),s=c[0],l=c[1];if(i)return{data:[],years:[]};var d=Object(u.useMemo)((function(){return o?(a&&a.length,K(o,e)):[]}),[o]);return{data:Object(u.useMemo)((function(){return o&&o.length?s.length?s.reduce((function(e,t){return"all"===t.value?e:V(e,t.dataProperty,t.value)}),o):o:[]}),[o,s]),years:d,filters:s,setFilters:l,updateFilter:function(e,t){s&&s.length&&l(s.map((function(n){return n.dataProperty===e?Object.assign({},n,{value:t}):n})))}}},se=function(e){return e.show?d.a.createElement("div",{className:h()("button-group",e.className)},d.a.createElement("button",{type:"button",className:h()("button button-sm button-outline",{active:"chart"===e.activeButton}),onClick:e.onClickChart},"Chart"),d.a.createElement("button",{type:"button",className:h()("button button-sm button-outline",{active:"table"===e.activeButton}),onClick:e.onClickTable},"Table")):null};se.propTypes={show:p.a.bool,onClickChart:p.a.func,onClickTable:p.a.func,activeButton:p.a.string,className:p.a.string},se.defaultProps={activeButton:"chart"};var le=se,ue=function(e){var t=ce(e.config),n=t.data,a=t.years,r=t.setFilters,o=t.updateFilter,i=Object(u.useState)("chart"),c=i[0],s=i[1],l=Object(u.useState)(e.config.type||"bar"),f=l[0],p=l[1];Object(u.useEffect)((function(){var t,n,a,o,i;r((t=e.config,n=e.subCounty,a=t.mapping,o=t.selectors,i=[],a.subCounty&&n&&i.push({dataProperty:a.subCounty,value:"all"}),o&&o.forEach((function(e){i.push({dataProperty:e.dataProperty,value:e.defaultValue?e.defaultValue.value:"all"})})),i))}),[]),Object(u.useEffect)((function(){var t=e.subCounty,n=e.config;t&&n.mapping.subCounty&&o(n.mapping.subCounty,e.subCounty)}),[e.subCounty]);return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:h()("spotlight-banner data-selector--wrapper dicharts--actions",{"align-left":!e.config.selectors})},e.config.selectors?d.a.createElement(A,{configs:e.config.selectors,onChange:function(e,t){o(e.dataProperty,t.value)}}):null,d.a.createElement(le,{show:!!e.config.table,onClickChart:function(){return s("chart")},onClickTable:function(){return s("table")},activeButton:c}),"chart"===c&&e.config.typeOptions?d.a.createElement(Z,{options:e.config.typeOptions,onChange:p}):null),"chart"===c?d.a.createElement(te,Object(j.a)({className:h()({"dicharts--padding-top":!e.config.selectors})},e,{data:n,years:a,height:e.config.height,type:f})):null,"table"===c&&e.config.table?d.a.createElement(oe,{rows:U(e.config.table,n,e.subCounty)}):null)};ue.propTypes={config:p.a.object,subCounty:p.a.string},ue.defaultProps={subCounty:"all"};var de,fe,pe=ue,be=function(e){(function(e){return e.className?e.series&&Array.isArray(e.series)?e.mapping?e.mapping.series?e.mapping.year?e.mapping.value?(e.mapping.subCounty||window.console.warn("Potentially invalid chart config: mapping.subCounty may be required!"),!0):(window.console.error("Invalid chart config: mapping.value is required!"),!1):(window.console.error("Invalid chart config: mapping.year is required!"),!1):(window.console.error("Invalid chart config: mapping.series is required!"),!1):(window.console.error("Invalid chart config: mapping is required!"),!1):(window.console.error(e.series?"Invalid chart config: Invalid series config - expected an array!":"Invalid chart config: Series is required!"),!1):(window.console.error("Invalid chart config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,echarts:{onAdd:function(t){Array.prototype.forEach.call(t,(function(t){t.classList.add("dicharts--dimensions"),t.parentElement.classList.add("auto-height");var n=new window.DICharts.Chart(t.parentElement);n.showLoading();var a="all",r=Object(o.createRoot)(t);r.render(Object(u.createElement)(pe,{config:e,subCounty:a})),window.DIState&&window.DIState.addListener((function(){var t=window.DIState.getState.subCounty;t&&t!==a&&(a=t,r.render(Object(u.createElement)(pe,{config:e,subCounty:a})))})),n.hideLoading()}))}}})},me=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.charts;t&&e.length!==t.length&&(e=t).forEach(be)}))}else window.console.log("State is not defined")},ge=n(13),he=n.n(ge),ve=function(e){var t=e.map,n=e.show,a=e.onAdd,r=Object(w.a)(e,["map","show","onAdd"]);return t&&(t.getLayer(r.id)&&t.removeLayer(r.id),n&&(t.addLayer(r),a&&a(t,r.id))),null};ve.defaultProps={show:!0},ve.propTypes={map:p.a.object,show:p.a.bool,onAdd:p.a.func};var ye={width:"100%",position:"absolute",top:0,bottom:0,background:"#F3F3F3"},Oe=function(e){he.a.accessToken=e.accessToken;var t=Object(u.useRef)(null),n=Object(u.useState)(void 0),a=n[0],o=n[1];Object(u.useEffect)((function(){if(t&&t.current){var n=new he.a.Map(Object.assign({container:t.current},e.options));e.showNavigationControls&&n.addControl(new he.a.NavigationControl),n.on("load",(function(t){o(n),e.onLoad&&e.onLoad(n,t)}))}}),[]);return Object(r.c)("div",{ref:t,style:Object.assign({},ye,e.style),css:Object(r.b)(de||(de=Object(b.a)(["\n        background: ",";\n        font-family: geomanist, sans-serif;\n      "])),e.background)},u.Children.map(e.children,(function(e){return Object(u.isValidElement)(e)&&e.type===ve?Object(u.cloneElement)(e,{map:a}):null})),Object(r.c)(r.a,{styles:Object(r.b)(fe||(fe=Object(b.a)(["\n          div .mapboxgl-canary {\n            background: red;\n          }\n\n          div .mapboxgl-popup {\n            z-index: 400;\n            max-width: 100% !important;\n          }\n\n          div .mapboxgl-popup-content {\n            background-color: rgba(0, 0, 0, 0.9) !important;\n            box-shadow: none !important;\n            color: #ffffff !important;\n            font-family: geomanist, sans-serif;\n            -webkit-tap-highlight-color: black;\n            opacity: 0.8;\n            padding: 20px;\n          }\n\n          div .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n            border-top-color: rgba(0, 0, 0, 0.9);\n            opacity: 0.8;\n          }\n\n          div .mapboxgl-popup-content .mapBox-popup p {\n            margin-bottom: 0;\n          }\n\n          div .mapboxgl-popup-content .mapboxgl-popup-close-button {\n            color: #ffffff;\n            font-size: 1.8rem;\n          }\n        "])))}))};Oe.defaultProps={style:ye,options:{minZoom:6,zoom:6.1},showNavigationControls:!0,background:"inherit"},Oe.propTypes={accessToken:p.a.string,style:p.a.object,background:p.a.string,showNavigationControls:p.a.bool,onLoad:p.a.func,options:p.a.object,children:p.a.node,locationData:p.a.object};var je=n(24),we=n(4),xe=function(e,t){return t?t(e):e},Ce=function(e,t){return t&&"number"==typeof t.value?(e.dataPrefix||"")+'<span style="font-size: 1em; font-weight: 700; color:#EA7600">'+(n=t.value,void 0===a&&(a=1),(n>=1e12?(n/1e12).toFixed(a)+"tn":n>=1e9?(n/1e9).toFixed(a)+"bn":n>=1e6?(n/1e6).toFixed(a)+"m":n>=1e3?(n/1e3).toFixed(a)+"k":n>=0?""+n.toFixed(a):n<=-1e12?(n/1e12).toFixed(a)+"tn":n<=-1e9?(n/1e9).toFixed(a)+"bn":n<=-1e6?(n/1e6).toFixed(a)+"m":n<=1e3?(n/1e3).toFixed(a)+"k":""+n.toFixed(a))+"</span>")+(e.dataSuffix||""):"No Data";var n,a},Se=function(e){var t=e.geometry&&e.geometry.coordinates;return t?new ge.LngLat(t[0],t[1]):null},Ee=function(e,t,n){var a=e.querySourceFeatures("composite",{sourceLayer:n.sourceLayer,filter:["in",n.nameProperty,xe(t,n.formatter)]});return a&&a.length?function(e){if(Array.isArray(e)){var t=e.map((function(e){return Object(je.a)(e.geometry).geometry.coordinates}));return t.push(t[0]),Se(Object(je.a)(Object(we.f)([t])))}return Se(Object(je.a)(e))}(a):null},Le=function(e,t,n,a,r){return t.setLngLat(n).setHTML('\n        <div style="white-space: nowrap;">\n          <div style="font-size:1.6rem;padding-bottom:5px;font-weight:700;text-align:center;text-transform:capitalize;">\n            '+a.toLowerCase()+"\n          </div>\n          "+(r?'<em style="font-size:1.4rem;">'+r+"</em>":"")+"\n        </div>\n      ").addTo(e)},Ne=function(e,t,n){return t.find((function(t){var a=n?n(t.name):t.name;return e.toLowerCase()===(""+a).toLowerCase()}))},ke=Object(u.createContext)(),Pe=Object(u.createContext)(),Ie=n(38),Te=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}Object(Ie.a)(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}};var n=t.prototype;return n.componentDidCatch=function(e,t){window.console.log("Error Boundary:",e,t)},n.render=function(){return this.state.hasError?d.a.createElement("div",null,"Something went wrong! Please contact your administrator"):this.props.children},t}(u.Component);Te.propTypes={children:p.a.any};var Fe,Ae=Te,De=function(e,t){return e.find((function(e){return e.id===t}))},_e=function(e){return e.map((function(e){return{value:e.id,label:e.name}}))},ze=function(e,t){var n=De(e,t);return n?n.indicators.map((function(e){return{value:e.id,label:e.name}})):[]},Re=function(e,t,n){if(t&&n){var a=De(e,t);if(!(a&&a.indicators&&a.indicators.length))return[];var r=a.indicators.find((function(e){return e.id===n}));if(r&&r.yearRange)return I(r.yearRange).filter((function(e){return r.excludeYears?!r.excludeYears.includes(e):e})).reverse().map((function(e){return{value:e,label:e}}))}return[]},qe=function(e){var t=Object(u.useContext)(Pe),n=t.filterOptions,a=t.updateFilterOptions;return Object(u.useEffect)((function(){!n.topic&&e.length&&a({topic:e[0].id})}),[]),Object(u.useEffect)((function(){if(n.topic){var t=De(e,n.topic),r=t&&t.indicators&&t.indicators.length?t.indicators[0]:null;r&&a({indicator:r.id})}}),[n.topic]),Object(u.useEffect)((function(){if(n.indicator){var t=Re(e,n.topic,n.indicator);t.length&&!t.find((function(e){return e.value===n.year}))&&a({year:t[0].value})}}),[n.indicator]),{topicOptions:_e(e||[]),indicatorOptions:ze(e,n.topic),yearOptions:Re(e,n.topic,n.indicator)}},Ve=function(){var e=Object(u.useContext)(Pe),t=e.filters,n=e.topics,a=e.filterOptions,o=e.updateFilterOptions,i=qe(n),c=i.topicOptions,s=i.indicatorOptions,l=i.yearOptions,d=a.year,f=a.indicator,p=function(e,t,n){var a;if(Array.isArray(e)&&e.length)e[0].value!==n&&o(((a={})[t]=e[0].value,a));else if(e&&!Array.isArray(e)){var r;if(e.value!==n)o(((r={})[t]=e&&e.value,r))}};return Object(r.c)("form",{className:"form"},Object(r.c)("div",{className:h()("form-field","form-field--inline-block"),css:Object(r.b)(Fe||(Fe=Object(b.a)(["\n          z-index: auto;\n          margin-left: 5px;\n        "])))},Object(r.c)(E,{label:t.topicLabel,options:c,defaultValue:[c[0]],classNamePrefix:"topic-selector",isClearable:!1,css:{minWidth:"100%"},onChange:function(e){return o({topic:e&&e.value})}}),s&&s.length?Object(r.c)(E,{label:t.indicatorLabel,options:s,value:[f&&s.find((function(e){return e.value===f}))||s[0]],classNamePrefix:"indicator-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){return p(e,"indicator",f)}}):null,l&&l.length?Object(r.c)(E,{label:t.yearLabel,options:l,value:[d&&l.find((function(e){return e.value===d}))||l[0]],classNamePrefix:"year-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){return p(e,"year",d)}}):null))},Me=function(e){var t=e.children;return d.a.createElement("div",{className:"spotlight-legend","data-testid":"spotlight-legend"},u.Children.map(t,(function(e){return e})))};Me.propTypes={children:p.a.any};var Ue=Me,Ge=n(39),Ze=function(e){var t=e.children,n=e.className,a=e.bgColor,r=e.textColor,o=Ge(a);return d.a.createElement("span",{className:n,"data-testid":"spotlight-legend-item"},t,d.a.createElement("style",null,"\n      span."+n+" {\n        background-color: "+(a||"#D1CBCF")+" !important;\n        color: "+(r||o.isLight()?"#000":"#FFF")+";\n      }\n    "))};Ze.propTypes={children:p.a.any,className:p.a.string,bgColor:p.a.string,textColor:p.a.string};var Be=Ze,Ye=function(){var e,t,n=Object(u.useContext)(Pe).activeIndicator;return d.a.createElement("div",{className:"spotlight__content"},d.a.createElement(Ae,null,d.a.createElement(Ve,null)),n?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"spotlight__subheading"},n.name),n.description?d.a.createElement("p",{className:"spotlight__excerpt"},n.description):null,d.a.createElement(Ue,null,(e=n.range,t=n.colours,e&&t?e.map((function(n,a){return d.a.createElement(Be,{className:"item-"+n,bgColor:t[a],key:n},0===a?"< "+e[0]:e[a-1]+"-"+n)})).concat([d.a.createElement(Be,{className:"item-last",bgColor:t[t.length-1],key:e.length},"> "+e[e.length-1])]):null),d.a.createElement(Be,null,"no data / not applicable"))):null)},We=n(40),He={type:"shapefile",style:"mapbox://styles/edwinmp/ck42rrx240t8p1cqpkhgy2g0m/draft",sourceLayer:"Uganda_Sub-Counties_2019-8w0zb5",layerName:"uganda-Sub-counties-2019-8w0zb5",center:[32.655221,1.344666],zoom:8,minZoom:8,maxZoom:9,districtNameProperty:"District",nameProperty:"Subcounty",codeProperty:"scode2019",formatter:function(e,t){return void 0===t&&(t="map"),e.toUpperCase()}},Je=function(e,t,n,a){n&&(e.setFilter(t,["==",a.nameProperty,xe(n.name,a.formatter)]),setTimeout((function(){if(n.coordinates)e.flyTo({center:n.coordinates,zoom:8.5});else{var t=a.formatter?a.formatter(n.name):n.name;!function e(t,n,a,r){return void 0===r&&(r=!0),new Promise((function(o,i){var c=Ee(t,n,a);c?(t.flyTo({center:c,zoom:16}),o(c)):r?(t.flyTo({center:a.center,zoom:a.zoom||6.1}),setTimeout((function(){e(t,n,a,!1).then((function(e){return o(e)})).catch(i)}),500)):i(new Error("Location "+n+" not found!"))}))}(e,t,a)}}),500))},Xe=function(e,t,n){if(!t)return[];if(!t.mapping)throw new Error("Mapping is required for indicator "+t.id);var a=t.mapping,r=a.location,o=a.value,i=a.year,c=M(e,t.filters);return c=n?c.filter((function(e){return""+e[i]==""+n})).map((function(e){return{name:e[r],value:Number(e[o])}})):c.map((function(e){return{name:e[r],value:Number(e[o])}})),t.aggregator?function(e,t){var n=Object(We.groupBy)(e,(function(e){return e.name}));return Object.keys(n).map((function(e){var a=n[e].reduce((function(e,t){return e+t.value}),0),r=a/n[e].length;return{name:e,value:"sum"===t?a:r}}))}(c,t.aggregator):c},Ke=function(e){return e.split(",").map((function(e){return parseFloat(e)}))},$e=function(e,t){var n="https://raw.githubusercontent.com/devinit/ug-district-dashboard-viz/feature/masindi-school-markers/public/assets/data/"+e.toLowerCase()+"/schools-locations.csv",a={type:"FeatureCollection",features:[]};return t&&n&&n?(T(n).then((function(e){"all"===t.ownership?e.filter((function(e){return e.level===t.level})).forEach((function(e){if(e.gps_coordinates){var t=Ke(e.gps_coordinates);t&&a.features.push({type:"Feature",geometry:{type:"Point",coordinates:[t[1],t[0]]},properties:{level:e.level,ownership:e.ownership,name:e.school_name,parish:e.parish}})}})):e.filter((function(e){return e.level===t.level&&e.ownership===t.ownership})).forEach((function(e){if(e.gps_coordinates){var t=Ke(e.gps_coordinates);t&&a.features.push({type:"Feature",geometry:{type:"Point",coordinates:[t[1],t[0]]},properties:{level:e.level,ownership:e.ownership,name:e.school_name,parish:e.parish}})}}))})).catch((function(e){console.log(e)})),a):a};function Qe(e){return"numberOfPrimarySchools"===e?{level:"Primary",ownership:"all"}:"numberOfSecondarySchools"===e?{level:"Secondary",ownership:"all"}:"numberOfGovernmentPrimarySchools"===e?{level:"Primary",ownership:"Government"}:"numberOfPrivatePrimarySchools"===e?{level:"Primary",ownership:"Private"}:"numberOfGovernmentSecondarySchools"===e?{level:"Secondary",ownership:"Government"}:"numberOfPrivateSecondarySchools"===e?{level:"Secondary",ownership:"Private"}:""}var et,tt=function(e,t,n,a){!function(e,t,n){var a=n.popup,r=n.nameProperty,o=n.formatter,i=n.data,c=function(e,t){if(e.features&&e.features[0].properties){var n=e.features[0].geometry;if("Polygon"===n.type||"MultiPolygon"===n.type)return e.features[0].properties[t]||null}return null}(t,r);if(c){var s=o?o(c,"tooltip"):c;if(i){var l=Ne(s,i);Le(e,a,t.lngLat,s,Ce(n,l))}else Le(e,a,t.lngLat,s,"")}}(t,n,Object.assign({},a,{popup:e}))},nt=new ge.Popup({offset:5}),at=new ge.Popup({offset:5}),rt=function(e,t,n){void 0===n&&(n={});var a=Object(u.useState)(),r=a[0],o=a[1],i=Object(u.useState)(n),c=i[0],d=i[1],f=Object(u.useState)([]),p=f[0],b=f[1],m=Object(u.useState)(),g=m[0],h=m[1],v=Object(u.useState)(""),y=v[0],O=v[1],j=Object(u.useCallback)((function(e){r.getCanvas().style.cursor="pointer",tt(nt,r,e,Object.assign({},t,{data:p},c))}),[r,p,c]),w=Object(u.useCallback)((function(){r.getCanvas().style.cursor="",nt.remove()}),[r,e]),x=Object(u.useCallback)((function(e){e.preventDefault(),r.off("mousemove","highlight",j),nt.remove(),e.features.length&&r.setLayoutProperty("points","icon-size",["match",["get","name"],e.features[0].properties.name,.4,.2])}),[r,g]),C=Object(u.useCallback)((function(e){for(var t=e.features[0].geometry.coordinates.slice(),n=e.features[0].properties,a=n.name,o=n.parish,i=n.ownership;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;at.setLngLat(t).setHTML('\n      <div style="white-space: nowrap;">\n        <div style="font-size:1.6rem;padding-bottom:5px;font-weight:700;text-align:center;text-transform:capitalize;">\n          '+a+"\n        </div>\n        <p>Coordinates: "+t+"</p>\n        <p>Ownership: "+i+"</p>\n        <p>Parish: "+o+"</p>\n      </div>\n    ").addTo(r)})),S=Object(u.useCallback)((function(){r.on("mousemove","highlight",j),nt.remove(),r.setLayoutProperty("points","icon-size",.2)}),[r,e]);return Object(u.useEffect)((function(){r&&(r.getLayer("points")&&r.removeLayer("points"),g.features.length&&r.loadImage("https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png",(function(e,t){if(e)throw e;r.hasImage("custom-marker")||r.addImage("custom-marker",t,{sdf:!0}),r.getSource("points")||r.addSource("points",{type:"geojson",data:g,generateId:!0}),r.getLayer("points")||r.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"custom-marker","icon-anchor":"bottom","icon-size":.2},paint:{"icon-color":"#f55220"},minzoom:8}),r.getSource("points").setData(g)})))}),[r,p,g,y]),Object(u.useEffect)((function(){r&&(r.getStyle().layers.forEach((function(e){["background","highlight"].includes(e.id)||r.setLayoutProperty(e.id,"visibility","none")})),function(e,t,n){t.clientWidth<700?e.setZoom(n.zoom?n.zoom-1:5):t.clientWidth<900?e.setZoom(n.minZoom?n.minZoom+.8:5.8):e.setZoom(n.zoom||6.1)}(r,r.getContainer(),t),r.off("mousemove","points",x),r.off("mouseleave","highlight",w),r.off("mouseover","highlight",j),r.off("click","points",C),r.on("mousemove","highlight",j),r.on("mouseleave","highlight",w),r.on("mousemove","points",x),r.on("mouseleave","points",S),r.on("click","points",C))}),[r,e,c,p]),Object(u.useEffect)((function(){var t=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,b(Xe(n,c.indicator,c.year));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.indicator&&c.year&&(O(Qe(c.indicator.id)),h($e(e.name,Qe(c.indicator.id))),t(c.indicator.url))}),[c.indicator,c.year]),{map:r,data:p,setData:b,setMap:o,setOptions:d}},ot=function(e,t,n,a,o){var i=[a].map((function(e){return Object(r.c)(ve,{key:"highlight-hidden",id:e.layerName,source:"composite","source-layer":e.sourceLayer,show:!1})}));function c(e,t){Je(e,t,n,Object.assign({},a,{nameProperty:a.districtNameProperty}))}if(!e&&o.range&&o.colours&&t.length){var s=function(e,t,n,a){return e&&t&&n?e.map((function(e){var r=xe(e.name,a),o=t.find((function(t){return null!==e.value&&e.value<=parseFloat(t)}));return o?[r,n[t.indexOf(o)]]:e.value>parseFloat(t[t.length-1])?[r,n[n.length-1]]:[r,"#b3adad"]})):[]}(t,o.range,o.colours,a.formatter);return i.concat(Object(r.c)(ve,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+2,type:"fill",paint:{"fill-color":{property:a.nameProperty,type:"categorical",default:"#D1CBCF",stops:s},"fill-opacity":.9,"fill-outline-color":"#ffffff"},onAdd:c}))}return i.concat(Object(r.c)(ve,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+2,type:"fill",paint:{"fill-color":"#D1CBCF","fill-opacity":.75,"fill-outline-color":"#ffffff"},onAdd:c}))},it={topic:null,indicator:null,year:null},ct=m.a.div(et||(et=Object(b.a)(["\n  position: absolute;\n  top: 1.75em;\n  z-index: 1;\n  left: 1.4em;\n"])));function st(e,t){switch(t.type){case"UPDATE_FILTERS":return Object.assign({},e,{filterOptions:t.merge?Object.assign({},e.filterOptions,t.filterOptions):t.filterOptions,activeTopic:t.activeTopic,activeIndicator:t.activeIndicator,activeYear:t.activeYear});case"SET_DATA":return Object.assign({},e,{data:t.data});case"RESET_FILTERS":return Object.assign({},e,{filterOptions:it});default:throw new Error}}var lt={filterOptions:it},ut=function(e){var t=Object(u.useState)(!0),n=t[0],a=t[1],o=Object(u.useReducer)(st,lt),i=o[0],c=o[1],s=i.filterOptions,l=i.activeIndicator,d=i.activeTopic,f=i.activeYear,p=rt(e.location,e.configs.formatter?Object.assign({},He,{formatter:e.configs.formatter}):He),b=p.data,m=p.map,g=p.setMap,h=p.setOptions;Object(u.useEffect)((function(){if(l){var e=s.year;h({dataPrefix:l.name+": ",dataSuffix:e&&" in "+e,indicator:l,year:e})}}),[l,s.year,m]);var v,y,O=function(t,n){void 0===n&&(n=!0);var a=function(e,t){var n=t.topic,a=t.indicator,r=t.year;if(n){var o=e.find((function(e){return e.id===n}));if(o&&a){var i=o.indicators.find((function(e){return e.id===a}));if(i)return{topic:o,indicator:i,year:r}}return{topic:o}}return{}}(e.configs.data,Object.assign({},s,t)),r=a.topic,o=a.indicator,i=a.year;c({type:"UPDATE_FILTERS",merge:n,filterOptions:t,activeTopic:r,activeIndicator:o,activeYear:i})},j=(v=e.configs.data,y=s.topic,v.find((function(e){return e.id===y}))),w=Object(u.useMemo)((function(){return{filters:e.filters,topics:e.configs.data,filterOptions:s,updateFilterOptions:O,activeTopic:d,activeIndicator:l,activeYear:f}}));return Object(r.c)(Pe.Provider,{value:w},Object(r.c)("div",{className:"spotlight"},Object(r.c)("div",{className:"spotlight__aside spotlight__aside--no-margin",css:{minHeight:"600px"}},Object(r.c)(Ye,null)),Object(r.c)("div",{className:"spotlight__main spotlight__main--map"},n?Object(r.c)("div",null,"Loading ..."):null,j&&j.dashboardUrl?Object(r.c)(ct,null,Object(r.c)("a",{href:j.dashboardUrl,className:"button button--secondary--fill"},j.dashboardButtonCaption)):null,Object(r.c)(Oe,{accessToken:"pk.eyJ1IjoiZWR3aW5tcCIsImEiOiJjazFsdHVtcG0wOG9mM2RueWJscHhmcXZqIn0.cDR43UvfMaOY9cNJsEKsvg",locationData:$e(e.location.name),options:Object.assign({style:He.style,center:He.center,minZoom:He.minZoom||6,zoom:He.zoom||6.1,maxZoom:He.maxZoom||7,scrollZoom:!1},e.configs.options),style:{width:"100%",background:"#ffffff"},onLoad:function(e){a(!1),g(e)}},ot(n,b,e.location,e.configs.formatter?Object.assign({},He,{formatter:e.configs.formatter}):He,l?{range:l.range,colours:l.colours}:{})))))};ut.defaultProps={data:[]},ut.propTypes={configs:p.a.object,filters:p.a.object,data:p.a.array,location:p.a.shape({name:p.a.string,fullName:p.a.string,coordinates:p.a.array})};var dt,ft,pt,bt,mt,gt,ht,vt=ut,yt=m.a.div(dt||(dt=Object(b.a)(["\n  background: #ffffff;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n"]))),Ot=function(){return d.a.createElement(yt,null,d.a.createElement(J,null))},jt=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.map,r=e.location;a?n.render(d.a.createElement(vt,{configs:a,location:r,filters:a.filters})):n.render(d.a.createElement(Ot,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},wt=n(41),xt=function(e){var t=e.close,n=e.description,a=e.source;return Object(r.c)("div",{className:"spotlight-modal",css:Object(r.b)(pt||(pt=Object(b.a)(["\n        font-size: 12px;\n      "])))},Object(r.c)("a",{className:"close",onClick:t,css:Object(r.b)(bt||(bt=Object(b.a)(["\n          cursor: pointer;\n          position: absolute;\n          display: block;\n          padding: 5px 10px;\n          line-height: 20px;\n          right: 0px;\n          top: 0px;\n          font-size: 20px;\n          background: transparent;\n          color: #333131;\n          font-weight: 900;\n        "])))},"×"),Object(r.c)("div",{className:"content",css:Object(r.b)(mt||(mt=Object(b.a)(["\n          width: 100%;\n          padding: 10px 5px 10px 5px;\n        "])))},Object(r.c)("p",{className:"description",css:Object(r.b)(gt||(gt=Object(b.a)(["\n            font-size: 14px;\n          "])))},n),a?Object(r.c)(d.a.Fragment,null,Object(r.c)("br",null),Object(r.c)("p",{className:"source",css:Object(r.b)(ht||(ht=Object(b.a)(["\n                text-align: left;\n              "])))},a?Object(r.c)(d.a.Fragment,null,Object(r.c)("b",{css:Object(r.b)(ft||(ft=Object(b.a)(["\n              font-family: Geomanist Bold, sans-serif;\n            "])))},"Source:"," "),a):null)," "):null))};xt.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string,close:p.a.func.isRequired};var Ct,St,Et=xt,Lt=function(e){return Object(r.c)(wt.a,{trigger:Object(r.c)("span",{className:"spotlight__stat-icon",css:Object(r.b)(Ct||(Ct=Object(b.a)(["\n            display: inline-flex;\n            margin-left: 2px;\n            cursor: pointer;\n            padding: 8px;\n          "])))},Object(r.c)("i",{onClick:function(){document.querySelectorAll(".popup-content ").forEach((function(e){e.setAttribute("style","display:none;")}))},role:"presentation","aria-hidden":"true",className:"ico ico--12 ico-info-slate",css:Object(r.b)(St||(St=Object(b.a)(["\n              top: -1px;\n            "])))})),offsetX:20,arrowStyle:{height:"10px",width:"10px",position:"absolute",background:"rgb(255, 255, 255)",transform:"rotate(225deg)",margin:"-5px",zIndex:-1,boxShadow:"rgb(0 0 0 / 20%) 1px 1px 1px",bottom:"0%",left:"82px"},position:"bottom center",closeOnDocumentClick:!0,contentStyle:{zIndex:200,width:"350px",background:"#fff",fontWeight:400,fontStyle:"normal",fontSize:"12px",color:"#60575d",border:0,borderRadius:"0.28571429rem",boxShadow:"0 2px 4px 0 rgba(34, 36, 38, 0.12), 0 2px 10px 0 rgba(34, 36, 38, 0.15)",padding:"5px"}},(function(t){return Object(r.c)(Et,{close:t,description:e.description,source:e.source})}))};Lt.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string};var Nt=Lt,kt=function(e){var t=e.meta,n=void 0===t?{}:t,a=e.heading,r=e.children;return d.a.createElement("div",{className:"spotlight__stat"},d.a.createElement("h3",{className:"spotlight__stat-heading"},a,n.description||n.source?d.a.createElement(Nt,{description:n.description,source:n.source}):null),r)};kt.defaultProps={meta:{}},kt.propTypes={heading:p.a.string,meta:p.a.shape({description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string}),children:p.a.any};var Pt,It=kt,Tt=function(e){var t=e.value,n=e.note;return Object(r.c)("p",{className:"spotlight__stat-data"},t,n&&n.content?Object(r.c)("span",{className:"spotlight__stat-data__note",css:Object(r.b)(Pt||(Pt=Object(b.a)(["\n          transform: none;\n          position: relative;\n          top: -10px;\n        "])))},n.content," ",n.meta?Object(r.c)(Nt,{description:n.meta.description,source:n.meta.source}):null):null)};Tt.propTypes={note:p.a.object,value:p.a.string};var Ft,At=Tt,Dt=function(e){var t=e.children;return Object(r.c)("article",{className:"tabs__content",css:Object(r.b)(Ft||(Ft=Object(b.a)(["\n      z-index: 200;\n    "])))},t)};Dt.propTypes={children:p.a.any};var _t=Dt,zt=function(e){var t=e.id,n=e.active,a=e.label,r=e.children,o=e.onActivate;return d.a.createElement("section",{className:"tabs__container",id:t},d.a.createElement("input",{className:"tabs__input",type:"radio",name:"sections",id:t+"-option",defaultChecked:n}),d.a.createElement("label",{className:"tabs__label",htmlFor:t+"-option",onClick:o},a),u.Children.map(r,(function(e){return Object(u.isValidElement)(e)&&e.type===_t?e:null})))};zt.propTypes={id:p.a.string.isRequired,label:p.a.string.isRequired,active:p.a.bool,onActivate:p.a.func,children:p.a.any};var Rt=zt,qt=function(e){var t=e.children,n=e.onClick;return d.a.createElement("div",{className:"tabs__content__header",onClick:n},t)};qt.propTypes={children:p.a.any,onClick:p.a.func};var Vt,Mt,Ut,Gt,Zt,Bt=qt,Yt=function(e){var t=Object(u.useContext)(ke),n=t.data,a=t.location,o=t.options,i="education",c=q(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.education?n.education.find((function(e){return"Number of Schools"===e.caption})):null;return Object(r.c)(Rt,{id:i,label:c.label||"Education",active:!!e.active||c.active},Object(r.c)(_t,null,Object(r.c)(Bt,null,s?Object(r.c)("div",{css:Object(r.b)(Vt||(Vt=Object(b.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(Mt||(Mt=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(Ut||(Ut=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Gt||(Gt=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},P(s.value)),Object(r.c)(Nt,{description:"Last updated: "+s.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.education?n.education.filter((function(e){return"Number of Schools"!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(It,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Zt||(Zt=Object(b.a)(["\n                              display: flex;\n                              justify-content: center;\n                            "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(At,{value:e.value})))})):null)))};Yt.propTypes={active:p.a.bool};var Wt,Ht,Jt,Xt,Kt,$t=Yt,Qt=function(e){var t=Object(u.useContext)(ke),n=t.data,a=t.location,o=t.options,i="overview",c=q(o.tabs,i);return void 0===c.show||c.show?Object(r.c)(Rt,{id:i,label:c.label||"Overview",active:!!e.active||c.active},Object(r.c)(_t,null,Object(r.c)(Bt,null,n&&n.population?Object(r.c)("div",{css:Object(r.b)(Wt||(Wt=Object(b.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(Ht||(Ht=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(Jt||(Jt=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Total Population in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Xt||(Xt=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},P(n.population.value)),Object(r.c)(Nt,{description:"Last updated: "+n.population.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.administration?n.administration.map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(It,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Kt||(Kt=Object(b.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(At,{value:e.value})))})):null))):null};Qt.propTypes={active:p.a.bool};var en,tn,nn,an,rn,on,cn=Qt,sn=function(e){var t=Object(u.useContext)(ke),n=t.data,a=t.location,o=t.options,i="production",c=q(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.production?n.production.find((function(e){return""===e.caption})):null;return Object(r.c)(Rt,{id:i,label:c.label||"Production",active:!!e.active||c.active},Object(r.c)(_t,null,Object(r.c)(Bt,null,Object(r.c)("div",{css:Object(r.b)(en||(en=Object(b.a)(["\n              display: flex;\n            "])))},s?Object(r.c)("div",{css:Object(r.b)(tn||(tn=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(nn||(nn=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(an||(an=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},P(s.value)),Object(r.c)(Nt,{description:"Last updated: "+s.lastUpdated})):null,c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null)),n&&n.production&&n.production.length?Object(r.c)("div",{className:"l-2up"},n.production.filter((function(e){return""!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(It,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(rn||(rn=Object(b.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(At,{value:e.value})))}))):Object(r.c)("div",{css:Object(r.b)(on||(on=Object(b.a)(["\n              font-size: 16px;\n              display: flex;\n              justify-content: center;\n              width: 100%;\n            "])))},"No Production Data")))};sn.propTypes={active:p.a.bool};var ln,un=sn,dn=function(e){var t=e.children;return Object(r.c)("div",{className:"tabs",css:Object(r.b)(ln||(ln=Object(b.a)(["\n      z-index: 0;\n    "])))},t)};dn.propTypes={children:p.a.any};var fn=dn,pn=function(e){var t=Object(u.useState)({}),n=t[0],a=t[1];return Object(u.useEffect)((function(){e.data&&a(function(e){var t={},n=function(e){return{caption:e.Item,value:e.Value,lastUpdated:e["Last Updated"]}},a=e.find((function(e){return"Total Population"===e.Item}));return a&&(t.population=n(a)),t.administration=e.filter((function(e){return"Total Population"!==e.Item&&"Administration"===e.Department})).map(n),t.education=e.filter((function(e){return"Total Population"!==e.Item&&"Education"===e.Department})).map(n),t.production=e.filter((function(e){return"Total Population"!==e.Item&&"Production"===e.Department})).map(n),t}(e.data))}),[e.data]),Object(r.c)(ke.Provider,{value:Object.assign({},e,{data:n})},Object(r.c)(fn,null,Object(r.c)(cn,{active:!0}),Object(r.c)($t,null),Object(r.c)(un,null)))};pn.propTypes={data:p.a.array.isRequired,location:p.a.object.isRequired,options:p.a.object.isRequired};var bn=pn,mn=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.keyFacts,r=e.location;a&&a.url?T(a.url).then((function(e){Array.isArray(e)?n.render(d.a.createElement(bn,{data:e,options:a,location:r})):e.results?n.render(d.a.createElement(bn,{data:e.results,options:a,location:r})):(window.console.error("Invalid data shape. Expected an array or an object with a results property.",e),n.render(d.a.createElement(Ot,null)))})).catch((function(e){window.console.log(e),n.render(d.a.createElement(Ot,null))})):a&&a.data?n.render(d.a.createElement(bn,{data:a.data,options:a,location:r})):n.render(d.a.createElement(Ot,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},gn=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,o,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.config,o=t.subCounty,i=t.tableRoot,c=r.selectors.map((function(e){return{property:e.dataProperty,value:"all"}})),l=function(e,t){var n=Array.isArray(t)?t[0].value:t.value;if(n){var s=c.find((function(t){return t.property===e.config.dataProperty}));if(s){s.value=n;var l=c.reduce((function(e,t){return"all"===t.value?e:V(e,t.property,t.value)}),a),d=U(r,l,o);i.render(Object(u.createElement)(oe,{rows:d}))}}},e.abrupt("return",D(r.selectorClassName,{selectors:r.selectors,onChange:l,makeSticky:!1,nodes:n}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),hn=function(e){(function(e){return e.className?e.mapping?e.mapping.rows?e.mapping.year?e.mapping.value?e.mapping.subCounty?!!e.mapping.level||(window.console.error("Invalid table config: mapping[mapping.level] is required!"),!1):(window.console.error("Invalid table config: mapping.subCounty is required!"),!1):(window.console.error("Invalid table config: mapping.value is required!"),!1):(window.console.error("Invalid table config: mapping.year is required!"),!1):(window.console.error("Invalid table config: mapping.series is required!"),!1):(window.console.error("Invalid table config: mapping is required!"),!1):(window.console.error("Invalid table config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,d3:{onAdd:function(t){T(e.url).then((function(n){Array.prototype.forEach.call(t,(function(t){var a=new window.DICharts.Chart(t.parentElement);a.showLoading();var r=Object(o.createRoot)(t),i="all",c=[];window.DIState.addListener((function(){a.showLoading();var o=window.DIState.getState.subCounty;if(o!==i){i=o||"all";var s=e.filters&&e.filters.subCounties?function(e,t,n){return e.filter((function(e){return!t||"all"===t||e[n].toLowerCase()===t.toLowerCase()}))}(n,i,e.mapping.subCounty):n,l=U(e,s,i);r.render(Object(u.createElement)(oe,{rows:l})),e.selectors&&e.selectors.length&&gn({data:s,subCounty:i,config:e,tableRoot:r},c).then((function(e){c=e})),a.hideLoading(),t.parentElement.classList.add("auto-height")}}))}))}))}}})},vn=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.tables;t&&e.length!==t.length&&(e=t).forEach((function(e){hn(e)}))}))}else window.console.log("State is not defined")};n(93);window.addEventListener("load",(function(){D("district-selectors",{makeSticky:!0}),jt("dicharts--district-map"),vn(),mn("dicharts--keyfacts"),me()}))}},[[45,1,2]]]);