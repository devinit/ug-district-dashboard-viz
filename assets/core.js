(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){e.exports=n(91)},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a,r=n(1),o=n(11),i=n(92),c=n(7),s=n.n(c),l=n(12),u=n(0),d=n.n(u),f=n(2),p=n.n(f),b=n(3),m=n(14),g=m.a.div(a||(a=Object(b.a)(["\n  color: red;\n  font-size: 11px;\n  position: relative;\n  padding: 5px 5px 5px 0px;\n  display: block;\n"]))),v=function(e){var t=Object(u.useState)(""),n=t[0],a=t[1],r=function(t){t?"maxSelectedOptions"===t.type&&a(e.selectErrorMessage):a("")};return d.a.createElement("div",null,d.a.Children.map(e.children,(function(e){return d.a.isValidElement(e)?d.a.cloneElement(e,{onError:r}):e})),n?d.a.createElement(g,{className:"data-selector--wrapper"},n):null)};v.propTypes={selectErrorMessage:p.a.string,children:p.a.node};var h=v,y=n(33),O=n(21),j=n(22),w=n.n(j),x=n(41),C={control:function(e){return Object.assign({},e,{borderColor:"#ddd",borderRadius:"none",boxShadow:"none",":hover":{borderColor:"#357ba5"},":active":{borderColor:"#357ba5"}})},menu:function(e){return Object.assign({},e,{color:"#443e42",backgroundColor:"#FFFFFF"})},option:function(e,t){return Object.assign({},e,{fontSize:"14px",":hover":{backgroundColor:"#4e9ac6",color:"#ffffff"},backgroundColor:t.isSelected?"#357ba5":"transparent"})},singleValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValueLabel:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{paddingRight:6})},multiValueRemove:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{display:"none"})},input:function(e){return Object.assign({},e,{fontSize:"14px"})},indicatorsContainer:function(e){return Object.assign({},e,{pointerEvents:"none"})}},E=function(e){var t=e.label,n=e.onError,a=e.maxSelectedOptions,o=e.defaultValue,i=e.singleSelectOptions,c=e.className,s=Object(O.a)(e,["label","onError","maxSelectedOptions","defaultValue","singleSelectOptions","className"]),l=Object(u.useState)(o),d=l[0],f=l[1];Object(u.useEffect)((function(){s.onChange&&s.onChange(d),n&&n()}),[d]),Object(u.useEffect)((function(){s.value&&f(s.value)}),[s.value]);return Object(r.c)("div",{className:w()("labelled-data-selector--wrapper",c)},Object(r.c)("label",null,Object(r.c)("b",null,t)),Object(r.c)(x.a,Object(y.a)({},s,{value:d,onChange:function(e){if(s.isMulti)if(e.length){var t=e.findIndex((function(e){return i.find((function(t){return t.value===e.value}))}));s.isMulti&&e.length>1&&-1!==t?f(0===t?e.slice(1):[e[t]]):a&&e.length>a?n&&n({type:"maxSelectedOptions",message:"Only up to "+a+" selections allowed"}):f(e)}else f(o);else f(e)},css:{marginRight:"25px"},styles:C,isClearable:"undefined"!==s.isClearable?s.isClearable:d.length>1})))};E.propTypes={label:p.a.string,options:p.a.array,maxSelectedOptions:p.a.number,onChange:p.a.func,onError:p.a.func,defaultValue:p.a.array,singleSelectOptions:p.a.array,isMulti:p.a.bool,isClearable:p.a.bool,className:p.a.string,value:p.a.array},E.defaultProps={maxSelectedOptions:2,singleSelectOptions:[]};var S=E,L=n(34);function N(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var I=function(e,t){void 0===t&&(t="");var n=Number(e);return Number.isNaN(n)?t:new Intl.NumberFormat("en-GB",{maximumFractionDigits:2}).format(n)},T=function(e){for(var t,n=e[1]-e[0]+1,a=[],r=N(Array(n).keys());!(t=r()).done;){var o=t.value;a.push(o)}return a.map((function(t){return e[0]+t}))},P=function(e){return e.endsWith("csv")?function(e){return new Promise((function(t){Object(L.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,complete:function(e){var n=e.data;return t(n)}})}))}(e):window.fetch(e).then((function(e){return e.json()}))},A=function(e){var t=Object(u.useState)([]),n=t[0],a=t[1];Object(u.useEffect)((function(){e.configs&&Promise.all(e.configs.map(function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n={label:t.label,defaultValue:t.defaultValue,config:t}).options=t.defaultValue?[t.defaultValue]:[],a=t.data||[],!t.url){e.next=7;break}return e.next=6,P(t.url);case 6:a=e.sent;case 7:return n.options=n.options.concat(a.reduce((function(e,n){return e.find((function(e){return e[t.valueProperty]===n[t.valueProperty]}))||e.push({value:n[t.valueProperty],label:n[t.labelProperty]}),e}),[])),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(a).catch((function(e){return window.console.log(e)}))}),[e.configs]);return Object(r.c)(h,{selectErrorMessage:""},n.map((function(t){var n=t.label,a=t.options,o=t.defaultValue;return Object(r.c)(S,{key:n,label:n,options:a,classNamePrefix:"subcounty-filter sticky-top",isClearable:!1,defaultValue:[Object.assign({},o,{isCloseable:!0})],onChange:function(n){return e.onChange(t,n)},css:{minWidth:"200px"}})})))};A.propTypes={configs:p.a.arrayOf(p.a.shape({url:p.a.string,label:p.a.string.isRequired,defaultValue:p.a.shape({value:p.a.string,label:p.a.string}),labelProperty:p.a.string.isRequired,valueProperty:p.a.string.isRequired})),onChange:p.a.func};var D=A,F=function(e,t){void 0===t&&(t={makeSticky:!1});var n=[],a=function(e,t){var n;window.DIState.setState(((n={})[e.config.stateProperty]=t.value,n))};return t.nodes&&t.nodes.length?(t.nodes.forEach((function(e){n.push(new Promise((function(n){e.render(Object(r.c)(D,{key:Object(i.a)(),configs:t.selectors,onChange:t.onChange||a})),n(e)})))})),Promise.all(n)):(Array.prototype.forEach.call(document.querySelectorAll("."+e),(function(e){n.push(new Promise((function(n){var i=new window.DICharts.Chart(e.parentElement);i.showLoading();var c=e.closest(".section");t.makeSticky&&c.classList.add("sticky");var s,l,u=((l=(s=e).classList).add.apply(l,["spotlight-banner","data-selector--wrapper"]),s),d=Object(o.createRoot)(u);window.DIState?window.DIState.addListener((function(){i.showLoading();var e=(t.selectors?t:window.DIState.getState).selectors;e?(Array.isArray(e)||window.console.log("Invalid value for selectors - an Array is expected. Please review the documentation!"),d.render(Object(r.c)(D,{configs:e,onChange:t.onChange||a}))):window.console.log("Waiting on state update ...")})):window.console.log("State is not defined"),i.hideLoading(),e.parentElement.classList.add("auto-height"),n(d)})))})),Promise.all(n))},_=n(35),z=n(16),R=function(){function e(){this.id=Object(i.a)(),this.state={},this.listeners=[],Object(z.d)(this,{state:z.e,setState:z.a,getState:z.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(z.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(_.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new R;var q=n(15),V=n.n(q);var U,M,Z={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0c457b","#0071b1","#0089cc","#5da3d9","#77adde","#88bae5","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"],orange:["#973915","#d85b31","#eb642b","#f18e5e","#f4a57c","#f6bb9d"],cerulean:["#1a3e53","#2b6587","#357ba5","#78b1d4","#ecf4f9"]},W={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{fontFamily:"Geomanist Regular,sans-serif"},axisPointer:{type:"none"}},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!0,title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){return"<div>"+e.title+"</div>"}}}},color:Z.rainbow,xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},axisPointer:{type:"none"},grid:{top:10}},B=(n(8),function(){return d.a.createElement("div",{className:"no-data"},"No Data")}),G=function(e,t,n){var a=e.slice();return t.forEach((function(t,r){void 0===a[r]?a[r]=n.cloneUnlessOtherwiseSpecified(t,n):n.isMergeableObject(t)?a[r]=V()(e[r],t,n):-1===e.indexOf(t)&&a.push(t)})),a},Y=function(e,t){return t&&e?e.find((function(e){return e.id===t})):null},J=function(e,t,n){return e.filter((function(e){return!t||"all"===t||e[n].toLowerCase()===t.toLowerCase()}))},H=function(e,t,n){return t&&n?e.filter((function(e){return e[t].toLowerCase()===n.toLowerCase()})):e},X=function(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach((function(e){n=n.filter((function(n){return t[e].includes(n[e])}))})),n},K=function(e,t,n,a){var r=e.series,o=e.mapping,i=r.map((function(n,c){return{name:n,type:(s=e.type,s?"area"===s?"line":s:"bar"),stack:!e.type||["area","bar","column"].includes(e.type)?"Education":void 0,areaStyle:"area"===e.type?{}:void 0,smooth:!0,emphasis:{focus:"series"},label:{show:c===r.length-1,position:"top",formatter:function(e){for(var t=0,n=0;n<i.length;n+=1)t+=parseInt(i[n].data[e.dataIndex],10);return I(t)}},data:a.map((function(a){var r=[];if(t.forEach((function(e){e[o.year]===a&&e[o.series].toLowerCase()===n.toLowerCase()&&r.push(Number(e[o.value]))})),!e.aggregator||"sum"===e.aggregator)return r.reduce((function(e,t){return e+t}),0);if("avg"===e.aggregator){var i=r.reduce((function(e,t){return e+t}),0);return I(i/r.length)}throw new Error("Invalid aggregator: ",e.aggregator)}))};var s}));return i},$=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,o,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.config,t.subCounty,o=t.years,i=t.chart,c=r.selectors.map((function(e){return{property:e.dataProperty,value:"all"}})),l=function(e,t){var n=i.getOption(),s=Array.isArray(t)?t[0].value:t.value;if(s){var l=c.find((function(t){return t.property===e.config.dataProperty}));if(l){l.value=s;var u=c.reduce((function(e,t){return"all"===t.value?e:H(e,t.property,t.value)}),a);n.series=K(r,u||[],0,o),i.setOption(V()(n,r.options||{},{arrayMerge:G}))}}},e.abrupt("return",F(r.selectorClassName,{selectors:r.selectors,onChange:l,makeSticky:!1,nodes:n}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(e){(function(e){return e.className?e.series&&Array.isArray(e.series)?e.mapping?e.mapping.series?e.mapping.year?e.mapping.value?!!e.mapping.subCounty||(window.console.error("Invalid chart config: mapping.subCounty is required!"),!1):(window.console.error("Invalid chart config: mapping.value is required!"),!1):(window.console.error("Invalid chart config: mapping.year is required!"),!1):(window.console.error("Invalid chart config: mapping.series is required!"),!1):(window.console.error("Invalid chart config: mapping is required!"),!1):(window.console.error(e.series?"Invalid chart config: Invalid series config - expected an array!":"Invalid chart config: Series is required!"),!1):(window.console.error("Invalid chart config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,echarts:{onAdd:function(t){Array.prototype.forEach.call(t,(function(t){t.classList.add("dicharts--dimensions","dicharts--padding-top");var n=new window.DICharts.Chart(t.parentElement),a=window.echarts.init(t);P(e.url).then((function(t){if(window.DIState){var r="all";window.DIState.setState({subCounty:r});var o=e.filters?X(t,e.filters):t,i=(l=o,(u=e.yearRange)?T(u).map((function(e){return""+e})):Array.from(new Set(l.map((function(e){return Number(e.year)})))).sort((function(e,t){return e-t})).map((function(e){return e.toString()}))),c=[],s=function(t){var n=J(o,r=t||"all",e.mapping.subCounty);!function(e){var t=e.data,n=(e.subCounty,e.years),a=e.config,r=e.chart,o=V()(W,{responsive:!1,legend:{selectedMode:!1},grid:{top:60,bottom:60},xAxis:{data:n,nameTextStyle:{verticalAlign:"top"},name:"Years"},yAxis:{type:"value",nameLocation:"middle",nameGap:50},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1}}},series:K(a,t,0,n)});o.color=Z.cerulean,r.setOption(V()(o,a.options||{},{arrayMerge:G}))}({data:n,subCounty:r,years:i,chart:a,config:e}),e.selectorClassName&&e.selectors&&e.selectors.length&&$({data:n,subCounty:r,years:i,chart:a,config:e},c).then((function(e){c=e}))};s(r),window.DIState.addListener((function(){n.showLoading();var e=window.DIState.getState.subCounty;e&&r!==e?(s(e),n.hideLoading()):n.hideLoading()}))}else window.console.log("State is not defined");var l,u})),function(e,t){window.addEventListener("onresize",(function(){e.resize({width:t.clientWidth+"px",height:t.clientHeight+"px"})}),!0)}(a,t)}))}}})},ee=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.charts;t&&e.length!==t.length&&(e=t).forEach(Q)}))}else window.console.log("State is not defined")},te=n(13),ne=n.n(te),ae=function(e){var t=e.map,n=e.show,a=e.onAdd,r=Object(O.a)(e,["map","show","onAdd"]);return t&&(t.getLayer(r.id)&&t.removeLayer(r.id),n&&(t.addLayer(r),a&&a(t,r.id))),null};ae.defaultProps={show:!0},ae.propTypes={map:p.a.object,show:p.a.bool,onAdd:p.a.func};var re={width:"100%",position:"absolute",top:0,bottom:0,background:"#F3F3F3"},oe=function(e){ne.a.accessToken=e.accessToken;var t=Object(u.useRef)(null),n=Object(u.useState)(void 0),a=n[0],o=n[1];Object(u.useEffect)((function(){if(t&&t.current){var n=new ne.a.Map(Object.assign({container:t.current},e.options));e.showNavigationControls&&n.addControl(new ne.a.NavigationControl),n.on("load",(function(t){o(n),e.onLoad&&e.onLoad(n,t)}))}}),[]);return Object(r.c)("div",{ref:t,style:Object.assign({},re,e.style),css:Object(r.b)(U||(U=Object(b.a)(["\n        background: ",";\n        font-family: geomanist, sans-serif;\n      "])),e.background)},u.Children.map(e.children,(function(e){return Object(u.isValidElement)(e)&&e.type===ae?Object(u.cloneElement)(e,{map:a}):null})),Object(r.c)(r.a,{styles:Object(r.b)(M||(M=Object(b.a)(["\n          div .mapboxgl-canary {\n            background: red;\n          }\n\n          div .mapboxgl-popup {\n            z-index: 400;\n            max-width: 100% !important;\n          }\n\n          div .mapboxgl-popup-content {\n            background-color: rgba(0, 0, 0, 0.9) !important;\n            box-shadow: none !important;\n            color: #ffffff !important;\n            font-family: geomanist, sans-serif;\n            -webkit-tap-highlight-color: black;\n            opacity: 0.8;\n            padding: 20px;\n          }\n\n          div .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n            border-top-color: rgba(0, 0, 0, 0.9);\n            opacity: 0.8;\n          }\n\n          div .mapboxgl-popup-content .mapBox-popup p {\n            margin-bottom: 0;\n          }\n\n          div .mapboxgl-popup-content .mapboxgl-popup-close-button {\n            color: #ffffff;\n            font-size: 1.8rem;\n          }\n        "])))}))};oe.defaultProps={style:re,options:{minZoom:6,zoom:6.1},showNavigationControls:!0,background:"inherit"},oe.propTypes={accessToken:p.a.string,style:p.a.object,background:p.a.string,showNavigationControls:p.a.bool,onLoad:p.a.func,options:p.a.object,children:p.a.node};var ie=n(23),ce=n(4),se=function(e,t){return t?t(e):e},le=function(e,t,n,a){return e&&t&&n?e.map((function(e){var r=se(e.name,a),o=t.find((function(t){return null!==e.value&&e.value<=parseFloat(t)}));return o?[r,n[t.indexOf(o)]]:e.value>parseFloat(t[t.length-1])?[r,n[n.length-1]]:[r,"#b3adad"]})):[]},ue=function(e,t){return t&&"number"==typeof t.value?(e.dataPrefix||"")+'<span style="font-size: 1em; font-weight: 700; color:#EA7600">'+(n=t.value,void 0===a&&(a=1),(n>=1e12?(n/1e12).toFixed(a)+"tn":n>=1e9?(n/1e9).toFixed(a)+"bn":n>=1e6?(n/1e6).toFixed(a)+"m":n>=1e3?(n/1e3).toFixed(a)+"k":n>=0?""+n.toFixed(a):n<=-1e12?(n/1e12).toFixed(a)+"tn":n<=-1e9?(n/1e9).toFixed(a)+"bn":n<=-1e6?(n/1e6).toFixed(a)+"m":n<=1e3?(n/1e3).toFixed(a)+"k":""+n.toFixed(a))+"</span>")+(e.dataSuffix||""):"No Data";var n,a},de=function(e){var t=e.geometry&&e.geometry.coordinates;return t?new te.LngLat(t[0],t[1]):null},fe=function(e,t,n){var a=e.querySourceFeatures("composite",{sourceLayer:n.sourceLayer,filter:["in",n.nameProperty,se(t,n.formatter)]});return a&&a.length?function(e){if(Array.isArray(e)){var t=e.map((function(e){return Object(ie.a)(e.geometry).geometry.coordinates}));return t.push(t[0]),de(Object(ie.a)(Object(ce.f)([t])))}return de(Object(ie.a)(e))}(a):null},pe=function(e,t,n,a,r){return t.setLngLat(n).setHTML('\n        <div style="white-space: nowrap;">\n          <div style="font-size:1.6rem;padding-bottom:5px;font-weight:700;text-align:center;text-transform:capitalize;">\n            '+a.toLowerCase()+"\n          </div>\n          "+(r?'<em style="font-size:1.4rem;">'+r+"</em>":"")+"\n        </div>\n      ").addTo(e)},be=function(e,t,n){return t.find((function(t){var a=n?n(t.name):t.name;return e.toLowerCase()===(""+a).toLowerCase()}))},me=Object(u.createContext)(),ge=Object(u.createContext)(),ve=n(37),he=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}Object(ve.a)(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}};var n=t.prototype;return n.componentDidCatch=function(e,t){window.console.log("Error Boundary:",e,t)},n.render=function(){return this.state.hasError?d.a.createElement("div",null,"Something went wrong! Please contact your administrator"):this.props.children},t}(u.Component);he.propTypes={children:p.a.any};var ye,Oe=he,je=function(e,t){return e.find((function(e){return e.id===t}))},we=function(e){return e.map((function(e){return{value:e.id,label:e.name}}))},xe=function(e,t){var n=je(e,t);return n?n.indicators.map((function(e){return{value:e.id,label:e.name}})):[]},Ce=function(e,t,n){if(t&&n){var a=je(e,t);if(!(a&&a.indicators&&a.indicators.length))return[];var r=a.indicators.find((function(e){return e.id===n}));if(r&&r.yearRange)return T(r.yearRange).map((function(e){return{value:e,label:e}}))}return[]},Ee=function(e){var t=Object(u.useContext)(ge),n=t.filterOptions,a=t.updateFilterOptions;return Object(u.useEffect)((function(){!n.topic&&e.length&&a({topic:e[0].id})}),[]),Object(u.useEffect)((function(){if(n.topic){var t=je(e,n.topic),r=t&&t.indicators&&t.indicators.length?t.indicators[0]:null;r&&a({indicator:r.id})}}),[n.topic]),Object(u.useEffect)((function(){if(n.indicator){var t=Ce(e,n.topic,n.indicator);t.length&&!t.find((function(e){return e.value===n.year}))&&a({year:t[0].value})}}),[n.indicator]),{topicOptions:we(e||[]),indicatorOptions:xe(e,n.topic),yearOptions:Ce(e,n.topic,n.indicator)}},Se=function(){var e=Object(u.useContext)(ge),t=e.filters,n=e.topics,a=e.filterOptions,o=e.updateFilterOptions,i=Ee(n),c=i.topicOptions,s=i.indicatorOptions,l=i.yearOptions,d=a.year;return Object(r.c)("form",{className:"form"},Object(r.c)("div",{className:w()("form-field","form-field--inline-block"),css:Object(r.b)(ye||(ye=Object(b.a)(["\n          z-index: auto;\n          margin-left: 5px;\n        "])))},Object(r.c)(S,{label:t.topicLabel,options:c,defaultValue:[c[0]],classNamePrefix:"topic-selector",isClearable:!1,css:{minWidth:"100%"},onChange:function(e){return o({topic:e&&e.value})}}),s&&s.length?Object(r.c)(S,{label:t.indicatorLabel,options:s,defaultValue:[s[0]],classNamePrefix:"indicator-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){return o({indicator:e&&e.value})}}):null,l&&l.length?Object(r.c)(S,{label:t.yearLabel,options:l,value:[d&&l.find((function(e){return e.value===d}))||l[0]],classNamePrefix:"year-selector",isClearable:!1,css:{minWidth:"100%",marginTop:"1em"},onChange:function(e){Array.isArray(e)&&e.length?e[0].value!==d&&o({year:e[0].value}):e&&!Array.isArray(e)&&e.value!==d&&o({year:e.value})}}):null))},Le=function(e){var t=e.children;return d.a.createElement("div",{className:"spotlight-legend","data-testid":"spotlight-legend"},u.Children.map(t,(function(e){return e})))};Le.propTypes={children:p.a.any};var Ne=Le,ke=n(38),Ie=function(e){var t=e.children,n=e.className,a=e.bgColor,r=e.textColor,o=ke(a);return d.a.createElement("span",{className:n,"data-testid":"spotlight-legend-item"},t,d.a.createElement("style",null,"\n      span."+n+" {\n        background-color: "+(a||"#D1CBCF")+" !important;\n        color: "+(r||o.isLight()?"#000":"#FFF")+";\n      }\n    "))};Ie.propTypes={children:p.a.any,className:p.a.string,bgColor:p.a.string,textColor:p.a.string};var Te,Pe=Ie,Ae=function(){var e,t,n=Object(u.useContext)(ge).activeIndicator;return d.a.createElement("div",{className:"spotlight__content"},d.a.createElement(Oe,null,d.a.createElement(Se,null)),n?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"spotlight__subheading"},n.name),n.description?d.a.createElement("p",{className:"spotlight__excerpt"},n.description):null,d.a.createElement(Ne,null,(e=n.range,t=n.colours,e&&t?e.map((function(n,a){return d.a.createElement(Pe,{className:"item-"+n,bgColor:t[a],key:n},0===a?"< "+e[0]:e[a-1]+"-"+n)})).concat([d.a.createElement(Pe,{className:"item-last",bgColor:t[t.length-1],key:e.length},"> "+e[e.length-1])]):null),d.a.createElement(Pe,null,"no data / not applicable"))):null)},De=n(39),Fe={type:"shapefile",style:"mapbox://styles/edwinmp/ck42rrx240t8p1cqpkhgy2g0m/draft",sourceLayer:"Uganda_Sub-Counties_2019-8w0zb5",layerName:"uganda-Sub-counties-2019-8w0zb5",center:[32.655221,1.344666],zoom:8,minZoom:8,maxZoom:9,districtNameProperty:"District",nameProperty:"Subcounty",codeProperty:"scode2019",formatter:function(e,t){return void 0===t&&(t="map"),e.toUpperCase()}},_e=function(e,t,n,a){n&&(e.setFilter(t,["==",a.nameProperty,se(n.name,a.formatter)]),setTimeout((function(){if(n.coordinates)e.flyTo({center:n.coordinates,zoom:8.5});else{var t=a.formatter?a.formatter(n.name):n.name;!function e(t,n,a,r){return void 0===r&&(r=!0),new Promise((function(o,i){var c=fe(t,n,a);c?(t.flyTo({center:c,zoom:16}),o(c)):r?(t.flyTo({center:a.center,zoom:a.zoom||6.1}),setTimeout((function(){e(t,n,a,!1).then((function(e){return o(e)})).catch(i)}),500)):i(new Error("Location "+n+" not found!"))}))}(e,t,a)}}),500))},ze=function(e,t,n){if(!t)return[];if(!t.mapping)throw new Error("Mapping is required for indicator "+t.id);var a=t.mapping,r=a.location,o=a.value,i=a.year,c=X(e,t.filters);return c=n?c.filter((function(e){return e[i]===""+n})).map((function(e){return{name:e[r],value:Number(e[o])}})):c.map((function(e){return{name:e[r],value:Number(e[o])}})),t.aggregator?function(e,t){var n=Object(De.groupBy)(e,(function(e){return e.name}));return Object.keys(n).map((function(e){var a=n[e].reduce((function(e,t){return e+t.value}),0),r=a/n[e].length;return{name:e,value:"sum"===t?a:r}}))}(c,t.aggregator):c},Re=function(e,t,n,a){!function(e,t,n){var a=n.popup,r=n.nameProperty,o=n.formatter,i=n.data,c=function(e,t){if(e.features&&e.features[0].properties){var n=e.features[0].geometry;if("Polygon"===n.type||"MultiPolygon"===n.type)return e.features[0].properties[t]||null}return null}(t,r);if(c){var s=o?o(c,"tooltip"):c;if(i){var l=be(s,i);pe(e,a,t.lngLat,s,ue(n,l))}else pe(e,a,t.lngLat,s,"")}}(t,n,Object.assign({},a,{popup:e}))},qe=new te.Popup({offset:5}),Ve=function(e,t,n){void 0===n&&(n={});var a=Object(u.useState)(),r=a[0],o=a[1],i=Object(u.useState)(n),c=i[0],d=i[1],f=Object(u.useState)([]),p=f[0],b=f[1],m=Object(u.useCallback)((function(e){r.getCanvas().style.cursor="pointer",Re(qe,r,e,Object.assign({},t,{data:p},c))}),[r,p,c]),g=Object(u.useCallback)((function(){r.getCanvas().style.cursor="",qe.remove()}),[r,e]);return Object(u.useEffect)((function(){r&&(r.getStyle().layers.forEach((function(e){["background","highlight"].includes(e.id)||r.setLayoutProperty(e.id,"visibility","none")})),function(e,t,n){t.clientWidth<700?e.setZoom(n.zoom?n.zoom-1:5):t.clientWidth<900?e.setZoom(n.minZoom?n.minZoom+.8:5.8):e.setZoom(n.zoom||6.1)}(r,r.getContainer(),t),r.off("mouseleave","highlight",g),r.off("mousemove","highlight",m),r.on("mousemove","highlight",m),r.on("mouseleave","highlight",g))}),[r,e,c,p]),Object(u.useEffect)((function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:n=e.sent,b(ze(n,c.indicator,c.year));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.indicator&&c.year&&e(c.indicator.url)}),[c.indicator,c.year]),{map:r,data:p,setData:b,setMap:o,setOptions:d}},Ue={topic:null,indicator:null,year:null},Me=m.a.div(Te||(Te=Object(b.a)(["\n  position: absolute;\n  top: 1.75em;\n  z-index: 1;\n  left: 1.4em;\n"])));function Ze(e,t){switch(t.type){case"UPDATE_FILTERS":return Object.assign({},e,{filterOptions:t.merge?Object.assign({},e.filterOptions,t.filterOptions):t.filterOptions,activeTopic:t.activeTopic,activeIndicator:t.activeIndicator,activeYear:t.activeYear});case"SET_DATA":return Object.assign({},e,{data:t.data});case"RESET_FILTERS":return Object.assign({},e,{filterOptions:Ue});default:throw new Error}}var We={filterOptions:Ue},Be=function(e){var t=Object(u.useState)(!0),n=t[0],a=t[1],o=Object(u.useReducer)(Ze,We),i=o[0],c=o[1],s=i.filterOptions,l=i.activeIndicator,d=i.activeTopic,f=i.activeYear,p=Ve(e.location,e.configs.formatter?Object.assign({},Fe,{formatter:e.configs.formatter}):Fe),b=p.data,m=p.setMap,g=p.setOptions;Object(u.useEffect)((function(){if(l){var e=s.year;g({dataPrefix:l.name+": ",dataSuffix:e&&" in "+e,indicator:l,year:e})}}),[l,s.year]);var v,h,y=function(t,n){void 0===n&&(n=!0);var a=function(e,t){var n=t.topic,a=t.indicator,r=t.year;if(n){var o=e.find((function(e){return e.id===n}));if(o&&a){var i=o.indicators.find((function(e){return e.id===a}));if(i)return{topic:o,indicator:i,year:r}}return{topic:o}}return{}}(e.configs.data,Object.assign({},s,t)),r=a.topic,o=a.indicator,i=a.year;c({type:"UPDATE_FILTERS",merge:n,filterOptions:t,activeTopic:r,activeIndicator:o,activeYear:i})},O=(v=e.configs.data,h=s.topic,v.find((function(e){return e.id===h}))),j=Object(u.useMemo)((function(){return{filters:e.filters,topics:e.configs.data,filterOptions:s,updateFilterOptions:y,activeTopic:d,activeIndicator:l,activeYear:f}}));return Object(r.c)(ge.Provider,{value:j},Object(r.c)("div",{className:"spotlight"},Object(r.c)("div",{className:"spotlight__aside spotlight__aside--no-margin",css:{minHeight:"600px"}},Object(r.c)(Ae,null)),Object(r.c)("div",{className:"spotlight__main spotlight__main--map"},n?Object(r.c)("div",null,"Loading ..."):null,O&&O.dashboardUrl?Object(r.c)(Me,null,Object(r.c)("a",{href:O.dashboardUrl,className:"button button--secondary--fill"},O.dashboardButtonCaption)):null,Object(r.c)(oe,{accessToken:"pk.eyJ1IjoiZWR3aW5tcCIsImEiOiJjazFsdHVtcG0wOG9mM2RueWJscHhmcXZqIn0.cDR43UvfMaOY9cNJsEKsvg",options:Object.assign({style:Fe.style,center:Fe.center,minZoom:Fe.minZoom||6,zoom:Fe.zoom||6.1,maxZoom:Fe.maxZoom||7,scrollZoom:!1},e.configs.options),style:{width:"100%",background:"#ffffff"},onLoad:function(e){a(!1),m(e)}},function(e,t,n,a,o){var i=[a].map((function(e){return Object(r.c)(ae,{key:"highlight-hidden",id:e.layerName,source:"composite","source-layer":e.sourceLayer,show:!1})}));function c(e,t){_e(e,t,n,Object.assign({},a,{nameProperty:a.districtNameProperty}))}return!e&&t.length?i.concat(Object(r.c)(ae,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+1,type:"fill",paint:{"fill-color":{property:a.nameProperty,type:"categorical",default:"#D1CBCF",stops:le(t,o.range,o.colours,a.formatter)},"fill-opacity":.75,"fill-outline-color":"#ffffff"},onAdd:c})):i.concat(Object(r.c)(ae,{key:"highlight",id:"highlight",source:"composite","source-layer":a.sourceLayer,maxzoom:a.maxZoom&&a.maxZoom+1,type:"fill",paint:{"fill-color":"#D1CBCF","fill-opacity":.75,"fill-outline-color":"#ffffff"},onAdd:c}))}(n,b,e.location,e.configs.formatter?Object.assign({},Fe,{formatter:e.configs.formatter}):Fe,l?{range:l.range,colours:l.colours}:{})))))};Be.defaultProps={data:[]},Be.propTypes={configs:p.a.object,filters:p.a.object,data:p.a.array,location:p.a.shape({name:p.a.string,fullName:p.a.string,coordinates:p.a.array})};var Ge,Ye,Je,He,Xe,Ke,$e,Qe=Be,et=m.a.div(Ge||(Ge=Object(b.a)(["\n  background: #ffffff;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n"]))),tt=function(){return d.a.createElement(et,null,d.a.createElement(B,null))},nt=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.map,r=e.location;a?n.render(d.a.createElement(Qe,{configs:a,location:r,filters:a.filters})):n.render(d.a.createElement(tt,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},at=n(40),rt=function(e){var t=e.close,n=e.description,a=e.source;return Object(r.c)("div",{className:"spotlight-modal",css:Object(r.b)(Je||(Je=Object(b.a)(["\n        font-size: 12px;\n      "])))},Object(r.c)("a",{className:"close",onClick:t,css:Object(r.b)(He||(He=Object(b.a)(["\n          cursor: pointer;\n          position: absolute;\n          display: block;\n          padding: 5px 10px;\n          line-height: 20px;\n          right: 0px;\n          top: 0px;\n          font-size: 20px;\n          background: transparent;\n          color: #333131;\n          font-weight: 900;\n        "])))},"Ã—"),Object(r.c)("div",{className:"content",css:Object(r.b)(Xe||(Xe=Object(b.a)(["\n          width: 100%;\n          padding: 10px 5px 10px 5px;\n        "])))},Object(r.c)("p",{className:"description",css:Object(r.b)(Ke||(Ke=Object(b.a)(["\n            font-size: 14px;\n          "])))},n),a?Object(r.c)(d.a.Fragment,null,Object(r.c)("br",null),Object(r.c)("p",{className:"source",css:Object(r.b)($e||($e=Object(b.a)(["\n                text-align: left;\n              "])))},a?Object(r.c)(d.a.Fragment,null,Object(r.c)("b",{css:Object(r.b)(Ye||(Ye=Object(b.a)(["\n              font-family: Geomanist Bold, sans-serif;\n            "])))},"Source:"," "),a):null)," "):null))};rt.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string,close:p.a.func.isRequired};var ot,it,ct=rt,st=function(e){return Object(r.c)(at.a,{trigger:Object(r.c)("span",{className:"spotlight__stat-icon",css:Object(r.b)(ot||(ot=Object(b.a)(["\n            display: inline-flex;\n            margin-left: 2px;\n            cursor: pointer;\n            padding: 8px;\n          "])))},Object(r.c)("i",{onClick:function(){document.querySelectorAll(".popup-content ").forEach((function(e){e.setAttribute("style","display:none;")}))},role:"presentation","aria-hidden":"true",className:"ico ico--12 ico-info-slate",css:Object(r.b)(it||(it=Object(b.a)(["\n              top: -1px;\n            "])))})),offsetX:20,arrowStyle:{height:"10px",width:"10px",position:"absolute",background:"rgb(255, 255, 255)",transform:"rotate(225deg)",margin:"-5px",zIndex:-1,boxShadow:"rgb(0 0 0 / 20%) 1px 1px 1px",bottom:"0%",left:"82px"},position:"bottom center",closeOnDocumentClick:!0,contentStyle:{zIndex:200,width:"350px",background:"#fff",fontWeight:400,fontStyle:"normal",fontSize:"12px",color:"#60575d",border:0,borderRadius:"0.28571429rem",boxShadow:"0 2px 4px 0 rgba(34, 36, 38, 0.12), 0 2px 10px 0 rgba(34, 36, 38, 0.15)",padding:"5px"}},(function(t){return Object(r.c)(ct,{close:t,description:e.description,source:e.source})}))};st.propTypes={description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string};var lt=st,ut=function(e){var t=e.meta,n=void 0===t?{}:t,a=e.heading,r=e.children;return d.a.createElement("div",{className:"spotlight__stat"},d.a.createElement("h3",{className:"spotlight__stat-heading"},a,n.description||n.source?d.a.createElement(lt,{description:n.description,source:n.source}):null),r)};ut.defaultProps={meta:{}},ut.propTypes={heading:p.a.string,meta:p.a.shape({description:p.a.oneOfType([p.a.string,p.a.element]),source:p.a.string}),children:p.a.any};var dt,ft=ut,pt=function(e){var t=e.value,n=e.note;return Object(r.c)("p",{className:"spotlight__stat-data"},t,n&&n.content?Object(r.c)("span",{className:"spotlight__stat-data__note",css:Object(r.b)(dt||(dt=Object(b.a)(["\n          transform: none;\n          position: relative;\n          top: -10px;\n        "])))},n.content," ",n.meta?Object(r.c)(lt,{description:n.meta.description,source:n.meta.source}):null):null)};pt.propTypes={note:p.a.object,value:p.a.string};var bt,mt=pt,gt=function(e){var t=e.children;return Object(r.c)("article",{className:"tabs__content",css:Object(r.b)(bt||(bt=Object(b.a)(["\n      z-index: 200;\n    "])))},t)};gt.propTypes={children:p.a.any};var vt=gt,ht=function(e){var t=e.id,n=e.active,a=e.label,r=e.children,o=e.onActivate;return d.a.createElement("section",{className:"tabs__container",id:t},d.a.createElement("input",{className:"tabs__input",type:"radio",name:"sections",id:t+"-option",defaultChecked:n}),d.a.createElement("label",{className:"tabs__label",htmlFor:t+"-option",onClick:o},a),u.Children.map(r,(function(e){return Object(u.isValidElement)(e)&&e.type===vt?e:null})))};ht.propTypes={id:p.a.string.isRequired,label:p.a.string.isRequired,active:p.a.bool,onActivate:p.a.func,children:p.a.any};var yt=ht,Ot=function(e){var t=e.children,n=e.onClick;return d.a.createElement("div",{className:"tabs__content__header",onClick:n},t)};Ot.propTypes={children:p.a.any,onClick:p.a.func};var jt,wt,xt,Ct,Et,St=Ot,Lt=function(e){var t=Object(u.useContext)(me),n=t.data,a=t.location,o=t.options,i="education",c=Y(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.education?n.education.find((function(e){return"Number of Schools"===e.caption})):null;return Object(r.c)(yt,{id:i,label:c.label||"Education",active:!!e.active||c.active},Object(r.c)(vt,null,Object(r.c)(St,null,s?Object(r.c)("div",{css:Object(r.b)(jt||(jt=Object(b.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(wt||(wt=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(xt||(xt=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Ct||(Ct=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},I(s.value)),Object(r.c)(lt,{description:"Last updated: "+s.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.education?n.education.filter((function(e){return"Number of Schools"!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(ft,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Et||(Et=Object(b.a)(["\n                              display: flex;\n                              justify-content: center;\n                            "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(mt,{value:e.value})))})):null)))};Lt.propTypes={active:p.a.bool};var Nt,kt,It,Tt,Pt,At=Lt,Dt=function(e){var t=Object(u.useContext)(me),n=t.data,a=t.location,o=t.options,i="overview",c=Y(o.tabs,i);return void 0===c.show||c.show?Object(r.c)(yt,{id:i,label:c.label||"Overview",active:!!e.active||c.active},Object(r.c)(vt,null,Object(r.c)(St,null,n&&n.population?Object(r.c)("div",{css:Object(r.b)(Nt||(Nt=Object(b.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(kt||(kt=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(It||(It=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Total Population in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Tt||(Tt=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},I(n.population.value)),Object(r.c)(lt,{description:"Last updated: "+n.population.lastUpdated})),c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null):null),Object(r.c)("div",{className:"l-2up"},n&&n.administration?n.administration.map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(ft,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(Pt||(Pt=Object(b.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(mt,{value:e.value})))})):null))):null};Dt.propTypes={active:p.a.bool};var Ft,_t,zt,Rt,qt,Vt,Ut=Dt,Mt=function(e){var t=Object(u.useContext)(me),n=t.data,a=t.location,o=t.options,i="production",c=Y(o.tabs,i);if(void 0!==c.show&&!c.show)return null;var s=n&&n.production?n.production.find((function(e){return""===e.caption})):null,l=function(){return c.dashboardURL?Object(r.c)("a",{href:c.dashboardURL,className:"button button--secondary--fill"},c.dashboardButtonCaption||"View Full Dashboard"):null};return Object(r.c)(yt,{id:i,label:c.label||"Production",active:!!e.active||c.active},Object(r.c)(vt,null,s?Object(r.c)(St,null,Object(r.c)("div",{css:Object(r.b)(Ft||(Ft=Object(b.a)(["\n                display: flex;\n              "])))},Object(r.c)("div",{css:Object(r.b)(_t||(_t=Object(b.a)(["\n                  margin-right: 1rem;\n                "])))},Object(r.c)("span",{css:Object(r.b)(zt||(zt=Object(b.a)(["\n                    font-size: 2.5rem;\n                  "])))},"Number of Schools in ",a.name," is"," "),Object(r.c)("b",{css:Object(r.b)(Rt||(Rt=Object(b.a)(["\n                    font-size: 3rem;\n                  "])))},I(s.value)),Object(r.c)(lt,{description:"Last updated: "+s.lastUpdated})),l())):l(),n&&n.production&&n.production.length?Object(r.c)("div",{className:"l-2up"},n.production.filter((function(e){return""!==e.caption})).map((function(e){return Object(r.c)("div",{className:"l-2up__col",key:e.caption},Object(r.c)(ft,{heading:e.caption,meta:{description:Object(r.c)("span",{css:Object(r.b)(qt||(qt=Object(b.a)(["\n                            display: flex;\n                            justify-content: center;\n                          "])))},"Last updated: "+e.lastUpdated)}},Object(r.c)(mt,{value:e.value})))}))):Object(r.c)("div",{css:Object(r.b)(Vt||(Vt=Object(b.a)(["\n              font-size: 16px;\n              display: flex;\n              justify-content: center;\n              width: 100%;\n            "])))},"No Production Data")))};Mt.propTypes={active:p.a.bool};var Zt,Wt=Mt,Bt=function(e){var t=e.children;return Object(r.c)("div",{className:"tabs",css:Object(r.b)(Zt||(Zt=Object(b.a)(["\n      z-index: 0;\n    "])))},t)};Bt.propTypes={children:p.a.any};var Gt=Bt,Yt=function(e){var t=Object(u.useState)({}),n=t[0],a=t[1];return Object(u.useEffect)((function(){e.data&&a(function(e){var t={},n=function(e){return{caption:e.Item,value:e.Value,lastUpdated:e["Last Updated"]}},a=e.find((function(e){return"Total Population"===e.Item}));return a&&(t.population=n(a)),t.administration=e.filter((function(e){return"Total Population"!==e.Item&&"Administration"===e.Department})).map(n),t.education=e.filter((function(e){return"Total Population"!==e.Item&&"Education"===e.Department})).map(n),t.production=e.filter((function(e){return"Total Population"!==e.Item&&"Production"===e.Department})).map(n),t}(e.data))}),[e.data]),Object(r.c)(me.Provider,{value:Object.assign({},e,{data:n})},Object(r.c)(Gt,null,Object(r.c)(Ut,{active:!0}),Object(r.c)(At,null),Object(r.c)(Wt,null)))};Yt.propTypes={data:p.a.array.isRequired,location:p.a.object.isRequired,options:p.a.object.isRequired};var Jt=Yt,Ht=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);if(t.showLoading(),window.DIState){var n=Object(o.createRoot)(e);window.DIState.addListener((function(){t.showLoading();var e=window.DIState.getState,a=e.keyFacts,r=e.location;a&&a.url?P(a.url).then((function(e){Array.isArray(e)?n.render(d.a.createElement(Jt,{data:e,options:a,location:r})):e.results?n.render(d.a.createElement(Jt,{data:e.results,options:a,location:r})):(window.console.error("Invalid data shape. Expected an array or an object with a results property.",e),n.render(d.a.createElement(tt,null)))})).catch((function(e){window.console.log(e),n.render(d.a.createElement(tt,null))})):a&&a.data?n.render(d.a.createElement(Jt,{data:a.data,options:a,location:r})):n.render(d.a.createElement(tt,null)),t.hideLoading()}))}else window.console.log("State is not defined")}))}}})},Xt=function(e){return d.a.createElement("div",{className:"table-styled"},d.a.createElement("table",null,e.children))};Xt.propTypes={children:p.a.any};var Kt=Xt,$t=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return d.a.createElement("tr",{key:n},e.map((function(e,n){return t?d.a.createElement("th",{key:n},e):d.a.createElement("td",{key:n},e)})))}))};return d.a.createElement(Kt,null,d.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),d.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))};$t.propTypes={rows:p.a.arrayOf(p.a.array)};var Qt=$t,en=function(e,t,n){var a=e.rows,r=e.mapping,o=T(e.yearRange),i=["School Type"].concat(o),c=a.map((function(a){var i={};t.filter((function(e){return o.includes(Number(e[r.year]))&&e[r.rows].toLowerCase()===a.toLowerCase()})).filter((function(e){return"all"===n||e[r.subCounty].toLowerCase()===n.toLowerCase()})).forEach((function(e){var t=i[e[r.year]]||[];i[e[r.year]]=[].concat(t,[Number(e[r.value])])}));var c={};Object.keys(i).forEach((function(t){if(e.aggregator&&"sum"!==e.aggregator){if(e.aggregator&&"avg"===e.aggregator){var n=i[t].reduce((function(e,t){return e+t}),0);c[t]=n/i[t].length}}else c[t]=i[t].reduce((function(e,t){return e+t}),0)}));var s=o.map((function(e){return c[e]?c[e]:0}));return[a].concat(s)})),s=i.map((function(e,t){return 0===t?"Total":I(c.reduce((function(e,n){return"number"==typeof n[t]?e+n[t]:e}),0))})),l=c.map((function(e){return e.map((function(e){return"number"==typeof e?I(e):e}))}));return[i].concat(l,[s])},tn=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,o,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.config,o=t.subCounty,i=t.tableRoot,c=r.selectors.map((function(e){return{property:e.dataProperty,value:"all"}})),l=function(e,t){var n=Array.isArray(t)?t[0].value:t.value;if(n){var s=c.find((function(t){return t.property===e.config.dataProperty}));if(s){s.value=n;var l=c.reduce((function(e,t){return"all"===t.value?e:H(e,t.property,t.value)}),a),d=en(r,l,o);i.render(Object(u.createElement)(Qt,{rows:d}))}}},e.abrupt("return",F(r.selectorClassName,{selectors:r.selectors,onChange:l,makeSticky:!1,nodes:n}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nn=function(e){(function(e){return e.className?e.mapping?e.mapping.rows?e.mapping.year?e.mapping.value?e.mapping.subCounty?!!e.mapping.level||(window.console.error("Invalid table config: mapping[mapping.level] is required!"),!1):(window.console.error("Invalid table config: mapping.subCounty is required!"),!1):(window.console.error("Invalid table config: mapping.value is required!"),!1):(window.console.error("Invalid table config: mapping.year is required!"),!1):(window.console.error("Invalid table config: mapping.series is required!"),!1):(window.console.error("Invalid table config: mapping is required!"),!1):(window.console.error("Invalid table config: className is required!"),!1)})(e)&&window.DICharts.handler.addChart({className:e.className,d3:{onAdd:function(t){P(e.url).then((function(n){Array.prototype.forEach.call(t,(function(t){var a=new window.DICharts.Chart(t.parentElement);a.showLoading();var r=Object(o.createRoot)(t),i="all",c=[];window.DIState.addListener((function(){a.showLoading();var o=window.DIState.getState.subCounty;if(o!==i){i=o||"all";var s=e.filters&&e.filters.subCounties?J(n,i,e.mapping.subCounty):n,l=en(e,s,i);r.render(Object(u.createElement)(Qt,{rows:l})),e.selectors&&e.selectors.length&&tn({data:s,subCounty:i,config:e,tableRoot:r},c).then((function(e){c=e})),a.hideLoading(),t.parentElement.classList.add("auto-height")}}))}))}))}}})},an=function(){if(window.DIState){var e=[];window.DIState.addListener((function(){var t=window.DIState.getState.tables;t&&e.length!==t.length&&(e=t).forEach((function(e){nn(e)}))}))}else window.console.log("State is not defined")};n(90);window.addEventListener("load",(function(){F("district-selectors",{makeSticky:!0}),nt("dicharts--district-map"),an(),Ht("dicharts--keyfacts"),ee()}))}},[[43,1,2]]]);